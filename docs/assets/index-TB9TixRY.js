var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{_ as o}from"./index.vue_vue_type_script_setup_true_lang-CQ-lFaSs.js";import{d as r,aF as d,p as u,c,k as m,Y as p,z as x,H as h,a6 as b,u as w,f as v,e as f,M as y,N as g,g as k,y as _,h as D,j as P,m as j,P as E,b as L}from"./index-DocD4lg6.js";import{_ as O}from"./_plugin-vue_export-helper-BCo6x5W8.js";const W={class:"menu-right"},$=["onClick"],M={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},I={class:"submenu-title flex-c w-full"},R={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},H=["onClick"],T={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},C=r((z=((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&l(e,n,t[n]);return e})({},{name:"ArtMenuRight"}),t(z,n({__name:"index",props:{menuItems:{},menuWidth:{default:120},submenuWidth:{default:150},itemHeight:{default:32},boundaryDistance:{default:10},menuPadding:{default:5},itemPaddingX:{default:6},borderRadius:{default:6},animationDuration:{default:100}},emits:["select","show","hide"],setup(e,{expose:t,emit:n}){E(e=>({v1f416ad6:a.menuWidth+"px",v02a4cd80:a.borderRadius+"px",v6d3065f4:a.animationDuration+"ms"}));const a=e,i=n,s=j(!1),l=j({x:0,y:0});let r=null,O=!1;const C=u(()=>({position:"fixed",left:`${l.value.x}px`,top:`${l.value.y}px`,zIndex:2e3,width:`${a.menuWidth}px`})),z=u(()=>({padding:`${a.menuPadding}px`})),A=u(()=>({height:`${a.itemHeight}px`,padding:`0 ${a.itemPaddingX}px`,borderRadius:"4px"})),X=u(()=>({minWidth:`${a.submenuWidth}px`,padding:`${a.menuPadding}px 0`,borderRadius:`${a.borderRadius}px`})),S=e=>{const t=window.innerWidth,n=window.innerHeight,i=(()=>{let e=2*a.menuPadding;return a.menuItems.forEach(t=>{e+=a.itemHeight,t.showLine&&(e+=10)}),e})();let s=e.clientX,l=e.clientY;return s+a.menuWidth>t-a.boundaryDistance&&(s=Math.max(a.boundaryDistance,s-a.menuWidth)),l+i>n-a.boundaryDistance&&(l=Math.max(a.boundaryDistance,n-i-a.boundaryDistance)),s=Math.max(a.boundaryDistance,Math.min(s,t-a.menuWidth-a.boundaryDistance)),l=Math.max(a.boundaryDistance,Math.min(l,n-i-a.boundaryDistance)),{x:s,y:l}},Y=()=>{O&&(document.removeEventListener("click",q),document.removeEventListener("contextmenu",B),document.removeEventListener("keydown",F),O=!1)},q=e=>{const t=e.target,n=document.querySelector(".context-menu");n&&n.contains(t)||N()},B=()=>{N()},F=e=>{"Escape"===e.key&&N()},N=()=>{s.value&&(s.value=!1,i("hide"),r&&(window.clearTimeout(r),r=null),Y())},G=e=>{e.disabled||(i("select",e),N())},J=e=>{e.style.transformOrigin="top left"},K=()=>{Y(),r&&(window.clearTimeout(r),r=null)};return d(()=>{Y(),r&&(window.clearTimeout(r),r=null)}),t({show:e=>{e.preventDefault(),e.stopPropagation(),r&&(window.clearTimeout(r),r=null),l.value=S(e),s.value=!0,i("show"),r=window.setTimeout(()=>{s.value&&(O||(document.addEventListener("click",q),document.addEventListener("contextmenu",B),document.addEventListener("keydown",F),O=!0)),r=null},50)},hide:N,visible:u(()=>s.value)}),(t,n)=>{const a=o;return L(),c("div",W,[m(p,{name:"context-menu",onBeforeEnter:J,onAfterLeave:K},{default:x(()=>[h(v("div",{style:f(w(C)),class:"context-menu art-card-xs !shadow-xl min-w-[var(--menu-width)] w-[var(--menu-width)]"},[v("ul",{class:"menu-list m-0 list-none",style:f(w(z))},[(L(!0),c(y,null,g(e.menuItems,e=>(L(),c(y,{key:e.key},[e.children?(L(),c("li",{key:1,class:"menu-item submenu relative flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",style:f(w(A))},[v("div",I,[e.icon?(L(),_(a,{key:0,class:"mr-2 shrink-0 text-base text-g-800",icon:e.icon},null,8,["icon"])):D("",!0),v("span",R,P(e.label),1),m(a,{icon:"ri:arrow-right-s-line",class:"ubmenu-arrow ml-auto mr-0 text-base text-g-500 transition-transform duration-150"})]),v("ul",{class:"submenu-list art-card-xs absolute left-full top-0 z-[2001] hidden w-max min-w-max list-none !shadow-xl",style:f(w(X))},[(L(!0),c(y,null,g(e.children,e=>(L(),c("li",{key:e.key,class:k(["menu-item relative mx-1.5 flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:f(w(A)),onClick:t=>G(e)},[e.icon?(L(),_(a,{key:0,class:"r-2 shrink-0 text-base text-g-800 mr-1",icon:e.icon},null,8,["icon"])):D("",!0),v("span",T,P(e.label),1)],14,H))),128))],4)],4)):(L(),c("li",{key:0,class:k(["menu-item relative flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:f(w(A)),onClick:t=>G(e)},[e.icon?(L(),_(a,{key:0,class:"mr-2 shrink-0 text-base text-g-800",icon:e.icon},null,8,["icon"])):D("",!0),v("span",M,P(e.label),1)],14,$))],64))),128))],4)],4),[[b,w(s)]])]),_:1})])}}}))));var z;const A=O(C,[["__scopeId","data-v-6b7fea37"]]);export{A};
