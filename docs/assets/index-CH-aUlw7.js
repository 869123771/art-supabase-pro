import{c5 as e,d as t,a1 as o,W as n,p as s,a8 as a,j as u,aj as d,a as l,o as i,T as c,b as r,b4 as m,G as v,c as f,b2 as p,$ as y,w as M,cO as b,Z as g,cM as h,a0 as w}from"./index-BKps0qP8.js";import{P as E,g as x}from"./vnode-BSa7duyX.js";import{t as k}from"./index-gRRlAg83.js";const L=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,n=!1;return{onClick:e=>{o&&n&&t(e),o=n=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},Y=o({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:d([String,Array,Object])},zIndex:{type:d([String,Number])}});const C=t({name:"ElOverlay",props:Y,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const d=n("overlay"),{onClick:l,onMousedown:i,onMouseup:c}=L(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?s("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:i,onMouseup:c},[u(t,"default")],E.STYLE|E.CLASS|E.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[u(t,"default")])}}),X=(e,t,o,n)=>{const s={offsetX:0,offsetY:0},a=l(!1),u=(t,o)=>{if(e.value){const{offsetX:a,offsetY:u}=s,d=e.value.getBoundingClientRect(),l=d.left,i=d.top,c=d.width,r=d.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,p=-l+a,y=-i+u,M=v-l-c+a,b=f-i-(r<f?r:0)+u;(null==n?void 0:n.value)||(t=Math.min(Math.max(t,p),M),o=Math.min(Math.max(o,y),b)),s.offsetX=t,s.offsetY=o,e.value.style.transform=`translate(${m(t)}, ${m(o)})`}},d=e=>{const t=e.clientX,o=e.clientY,{offsetX:n,offsetY:d}=s,l=e=>{a.value||(a.value=!0);const s=n+e.clientX-t,l=d+e.clientY-o;u(s,l)},i=()=>{a.value=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",i)},v=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",d),window.removeEventListener("resize",f))},f=()=>{const{offsetX:e,offsetY:t}=s;u(e,t)};return i(()=>{c(()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",d),window.addEventListener("resize",f)):v()})}),r(()=>{v()}),{isDragging:a,resetPosition:()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:f}},z=(e,t={})=>{v(e)||k("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||n("popup"),s=f(()=>o.bm("parent","hidden"));if(!p||y(document.body,s.value))return;let a=0,u=!1,d="0";const l=()=>{setTimeout(()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=d,w(document.body,s.value))},200)};M(e,e=>{if(!e)return void l();u=!y(document.body,s.value),u&&(d=document.body.style.width,g(document.body,s.value)),a=x(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=h(document.body,"overflowY");a>0&&(t||"scroll"===n)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)}),b(()=>l())};export{C as E,z as a,L as b,X as u};
