var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,i=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&r(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&r(e,a,l[a]);return e},n=(e,o)=>l(e,a(o)),u=(e,l,a)=>new Promise((o,s)=>{var t=e=>{try{i(a.next(e))}catch(l){s(l)}},r=e=>{try{i(a.throw(e))}catch(l){s(l)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,r);i((a=a.apply(e,l)).next())});import{d as p,m as d,o as m,b as c,y as v,z as f,k as y,u as b,f as g,i as j,en as _,eo as h,p as w}from"./index-DHdgQId_.js";import{E as O}from"./el-dialog-CvbxKYde.js";import"./el-overlay-D6YYUai9.js";import{E as x}from"./el-button-0c2o2QLg.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-DEUhHID8.js";import{c as V}from"./cloneDeep-BgGA_MGi.js";import{i as R}from"./isEmpty-B-SMALGS.js";const k={class:"dialog-footer"},C=p({__name:"user-role-dialog",emits:["success"],setup(e,{expose:l,emit:a}){const o=a,s=d({visible:!1,loading:!1}),t={userRoles:[]},r=d({data:V(t),items:w(()=>{var e,l;return[{label:"角色",key:"userRoles",type:"select",props:{multiple:!0,options:null!=(l=null==(e=p.value)?void 0:e.roles)?l:[]}}]}),rules:w(()=>({}))}),p=d({roles:[]}),C=()=>{r.value.data=V(t),s.value=n(i({},b(s)),{visible:!1})},E=()=>u(null,null,function*(){try{s.value.loading=!0;const{data:e}=r.value,l=i({},e);yield _(l),o("success"),C()}finally{s.value.loading=!1}});return m(()=>{u(null,null,function*(){const{data:e}=yield h();p.value=n(i({},b(p)),{roles:e.map(({roleCode:e,roleName:l})=>({label:l,value:e}))})})}),l({handleOpen:(e={})=>{if(s.value=n(i({},b(s)),{visible:!0}),!R(e)){const{id:l,userRoles:a=[]}=e;r.value.data={userRoles:a,id:l}}}}),(e,l)=>{const a=x,o=O;return c(),v(o,{modelValue:b(s).visible,"onUpdate:modelValue":l[1]||(l[1]=e=>b(s).visible=e),title:"赋予角色",width:"50%","align-center":"","destroy-on-close":"",onClose:C},{footer:f(()=>[g("span",k,[y(a,{onClick:C},{default:f(()=>[...l[2]||(l[2]=[j("取 消",-1)])]),_:1}),y(a,{type:"primary",onClick:E,loading:b(s).loading},{default:f(()=>[...l[3]||(l[3]=[j("确 定",-1)])]),_:1},8,["loading"])])]),default:f(()=>[y(P,{class:"pr-4",ref:"formRef",modelValue:b(r).data,"onUpdate:modelValue":l[0]||(l[0]=e=>b(r).data=e),items:b(r).items,rules:b(r).rules,span:24,gutter:20,"label-width":"80px","show-reset":!1,"show-submit":!1},null,8,["modelValue","items","rules"])]),_:1},8,["modelValue"])}}});export{C as _};
