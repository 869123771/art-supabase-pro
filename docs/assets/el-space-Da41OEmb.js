var e=(e,t,r)=>new Promise((l,n)=>{var a=e=>{try{i(r.next(e))}catch(t){n(t)}},s=e=>{try{i(r.throw(e))}catch(t){n(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,s);i((r=r.apply(e,t)).next())});import{d as t,a1 as r,W as l,c as n,a8 as a,j as s,a as i,T as o,ae as u,bY as c,p as f,l as d,cK as p,cq as y,bO as m,a9 as v,aj as h,ao as g}from"./index-CSMnfbno.js";import{P as S,i as b,b as x}from"./vnode-ouMtHBV5.js";const z=t({name:"ElSpaceItem",props:r({prefixCls:{type:String}}),setup(e,{slots:t}){const r=l("space"),i=n(()=>`${e.prefixCls||r.b()}__item`);return()=>a("div",{class:i.value},s(t,"default"))}}),A={small:8,default:12,large:16};const w=g(t({name:"ElSpace",props:r({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:h([String,Object,Array]),default:""},style:{type:h([String,Array,Object]),default:""},alignment:{type:h(String),default:"center"},prefixCls:{type:String},spacer:{type:h([Object,String,Number,Array]),default:null,validator:e=>p(e)||c(e)||v(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:m,validator:e=>c(e)||u(e)&&2===e.length&&e.every(c)}}),setup(e,{slots:t}){const{classes:r,containerStyle:a,itemStyle:m}=function(e){const t=l("space"),r=n(()=>[t.b(),t.m(e.direction),e.class]),a=i(0),s=i(0),f=n(()=>[e.wrap||e.fill?{flexWrap:"wrap"}:{},{alignItems:e.alignment},{rowGap:`${s.value}px`,columnGap:`${a.value}px`},e.style]),d=n(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return o(()=>{const{size:t="small",wrap:r,direction:l,fill:n}=e;if(u(t)){const[e=0,r=0]=t;a.value=e,s.value=r}else{let e;e=c(t)?t:A[t||"small"]||A.small,(r||n)&&"horizontal"===l?a.value=s.value=e:"horizontal"===l?(a.value=e,s.value=0):(s.value=e,a.value=0)}}),{classes:r,containerStyle:f,itemStyle:d}}(e);function v(t,r="",l=[]){const{prefixCls:n}=e;return t.forEach((e,t)=>{b(e)?u(e.children)&&e.children.forEach((e,t)=>{b(e)&&u(e.children)?v(e.children,`${r+t}-`,l):p(e)&&(null==e?void 0:e.type)===y?l.push(e):l.push(f(z,{style:m.value,prefixCls:n,key:`nested-${r+t}`},{default:()=>[e]},S.PROPS|S.STYLE,["style","prefixCls"]))}):x(e)&&l.push(f(z,{style:m.value,prefixCls:n,key:`LoopKey${r+t}`},{default:()=>[e]},S.PROPS|S.STYLE,["style","prefixCls"]))}),l}return()=>{var l;const{spacer:n,direction:i}=e,o=s(t,"default",{key:0},()=>[]);if(0===(null!=(l=o.children)?l:[]).length)return null;if(u(o.children)){let e=v(o.children);if(n){const t=e.length-1;e=e.reduce((e,r,l)=>{const a=[...e,r];return l!==t&&a.push(f("span",{style:[m.value,"vertical"===i?"width: 100%":null],key:l},[p(n)?n:d(n,S.TEXT)],S.STYLE)),a},[])}return f("div",{class:r.value,style:a.value},e,S.STYLE|S.CLASS)}return o.children}}})),E={recordFields:["list","data","records","items","result","rows"],totalFields:["total","count"],currentFields:["current","page","pageNum"],sizeFields:["size","pageSize","limit"],paginationKey:{current:"current",size:"size"}};function T(e,t){for(const r of t)if(r in e&&Array.isArray(e[r]))return e[r];return[]}function j(e,t,r){for(const l of r)if(l in e&&"number"==typeof e[l])return e[l];return t.length}function C(e,t){const r={},l=[e,null!=t?t:{}],n=E.currentFields;for(const s of l){for(const e of n)if(e in s&&"number"==typeof s[e]){r.current=s[e];break}if(void 0!==r.current)break}const a=E.sizeFields;for(const s of l){for(const e of a)if(e in s&&"number"==typeof s[e]){r.size=s[e];break}if(void 0!==r.size)break}if(void 0!==r.current||void 0!==r.size)return r}const F=e=>{const t=E.recordFields;if(!e)return{records:[],total:0};if(Array.isArray(e))return{records:e,total:e.length};if("object"!=typeof e)return{records:[],total:0};const r=e;let l,n=[],a=0;if(n=T(r,t),a=j(r,n,E.totalFields),l=C(r),0===n.length&&"data"in r&&"object"==typeof r.data){const e=r.data;n=T(e,["list","records","items"]),a=j(e,n,E.totalFields),l=C(r,e),Array.isArray(r.data)&&(n=r.data,a=n.length)}!t.some(e=>e in r)&&n.length;const s={records:n,total:a};return l&&Object.assign(s,l),s},O=e=>{const t=e.records||e.data||[];return Array.isArray(t)?t:[]},P=(e,t)=>{var r,l;e.total=null!=(l=null!=(r=t.total)?r:e.total)?l:0,void 0!==t.current&&(e.current=t.current);const n=Math.max(1,Math.ceil(e.total/(e.size||1)));e.current>n&&(e.current=n)},k=(t,r)=>{let l=null,n=null,a=null,s=null;const i=(...i)=>new Promise((o,u)=>{l&&clearTimeout(l),n=i,a=o,s=u,l=setTimeout(()=>e(null,null,function*(){try{const e=yield t(...i);o(e)}catch(e){u(e)}finally{l=null,n=null,a=null,s=null}}),r)});return i.cancel=()=>{l&&clearTimeout(l),l=null,n=null,a=null,s=null},i.flush=()=>e(null,null,function*(){if(l&&n&&a&&s){clearTimeout(l),l=null;const r=n,i=a,o=s;n=null,a=null,s=null;try{const e=yield t(...r);return i(e),e}catch(e){throw o(e),e}}return Promise.resolve()}),i},$=(e,t=!1)=>{const r=(e,...t)=>{};return(t,l)=>{const n={code:"UNKNOWN_ERROR",message:"未知错误",details:t};return t instanceof Error?(n.message=t.message,n.code=t.name):"string"==typeof t&&(n.message=t),r(`${l}:`,t),null==e||e(n),n}},N=e=>{const{current:t,size:r}=e;return{from:(t-1)*r,to:t*r}};export{w as E,$ as a,k as c,F as d,O as e,N as p,E as t,P as u};
