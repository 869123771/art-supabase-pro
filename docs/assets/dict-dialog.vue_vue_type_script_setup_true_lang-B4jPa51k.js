var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&n(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&n(e,l,a[l]);return e},i=(e,t)=>a(e,l(t));import{a9 as u,ab as c,bn as d,W as p,o as v,w as h,m,p as f,U as b,V as g,aC as y,a7 as k,b7 as _,_ as w,d as x,bw as V,b as C,c as S,f as E,u as K,e as j,g as A,a4 as B,al as D,cm as L,a1 as O,T as $,M as P,N as R,l as T,n as F,k as M,y as H,h as I,r as W,a2 as q,ao as z,cV as U,bb as X,cQ as Y,dr as N,z as Q,X as Z,H as G,a5 as J,ac as ee,a6 as ae,cK as le,B as te,i as oe,j as re,x as ne,s as se,ds as ie,dt as ue}from"./index-DocD4lg6.js";import{E as ce}from"./el-dialog-DlC7JF0o.js";import"./el-overlay-BFiG6gu6.js";import{T as de,E as pe}from"./el-button-D_FpX5vN.js";/* empty css                 */import{_ as ve}from"./index.vue_vue_type_script_setup_true_lang-D8QQsF4y.js";import{u as he}from"./validator-DBBIe7Ox.js";import{c as me}from"./cloneDeep-DHbxZ_0L.js";import{u as fe,E as be}from"./index-CXepPrJW.js";import{u as ge,p as ye}from"./index-DmiZVFYU.js";import{U as ke,C as _e}from"./event-BwRzfsZt.js";import{E as we,u as xe}from"./index-BQDo0aJw.js";import{u as Ve,a as Ce}from"./use-form-item-CYVSqIfx.js";import{d as Se,u as Ee}from"./index-B8YGeOD4.js";import{d as Ke}from"./error-D_Dr4eZ1.js";import{C as je}from"./index-C9voYJJp.js";import{d as Ae}from"./debounce-CUa5Mv9U.js";import{i as Be}from"./isEmpty-B1VGMfBf.js";import{o as De}from"./omit-Ba47H9Mc.js";const Le=u({color:{type:c(Object),required:!0},vertical:Boolean,disabled:Boolean}),Oe=Le;let $e=!1;function Pe(e,a){if(!d)return;const l=function(e){var l;null==(l=a.drag)||l.call(a,e)},t=function(e){var o;document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,$e=!1,null==(o=a.end)||o.call(a,e)},o=function(e){var o;$e||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",l),document.addEventListener("mouseup",t),document.addEventListener("touchmove",l),document.addEventListener("touchend",t),$e=!0,null==(o=a.start)||o.call(a,e))};e.addEventListener("mousedown",o),e.addEventListener("touchstart",o,{passive:!1})}const Re=e=>{let a,l;return"touchend"===e.type?(l=e.changedTouches[0].clientY,a=e.changedTouches[0].clientX):e.type.startsWith("touch")?(l=e.touches[0].clientY,a=e.touches[0].clientX):(l=e.clientY,a=e.clientX),{clientX:a,clientY:l}},Te=(e,{key:a,minValue:l,maxValue:t})=>{const o=k(),r=y(),n=y(),s=f(()=>e.color.get(a));function i(l){if(!n.value||!r.value||e.disabled)return;const s=o.vnode.el.getBoundingClientRect(),{clientX:i,clientY:u}=Re(l);let c;if(e.vertical){let e=u-s.top;e=Math.max(r.value.offsetHeight/2,e),e=Math.min(e,s.height-r.value.offsetHeight/2),c=Math.round((e-r.value.offsetHeight/2)/(s.height-r.value.offsetHeight)*t)}else{let e=i-s.left;e=Math.max(r.value.offsetWidth/2,e),e=Math.min(e,s.width-r.value.offsetWidth/2),c=Math.round((e-r.value.offsetWidth/2)/(s.width-r.value.offsetWidth)*t)}e.color.set(a,c)}function u(o){let r=s.value+o;r=r<l?l:r>t?t:r,e.color.set(a,r)}return{thumb:r,bar:n,currentValue:s,handleDrag:i,handleClick:function(a){var l;if(e.disabled)return;a.target!==r.value&&i(a),null==(l=r.value)||l.focus()},handleKeydown:function(o){if(e.disabled)return;const{shiftKey:r}=o,n=b(o),s=r?10:1,i="hue"===a?-1:1;let c=!0;switch(n){case g.left:case g.down:u(-s*i);break;case g.right:case g.up:u(s*i);break;case g.home:e.color.set(a,"hue"===a?t:l);break;case g.end:e.color.set(a,"hue"===a?l:t);break;case g.pageDown:u(-4*i);break;case g.pageUp:u(4*i);break;default:c=!1}c&&o.preventDefault()}}},Fe=(e,{namespace:a,maxValue:l,bar:t,thumb:o,currentValue:r,handleDrag:n,getBackground:s})=>{const i=k(),u=p(a),c=m(0),d=m(0),b=m();function g(){c.value=function(){if(!o.value)return 0;if(e.vertical)return 0;const a=i.vnode.el,t=r.value;return a?Math.round(t*(a.offsetWidth-o.value.offsetWidth/2)/l):0}(),d.value=function(){if(!o.value)return 0;const a=i.vnode.el;if(!e.vertical)return 0;const t=r.value;return a?Math.round(t*(a.offsetHeight-o.value.offsetHeight/2)/l):0}(),b.value=null==s?void 0:s()}v(()=>{if(!t.value||!o.value)return;const e={drag:e=>{n(e)},end:e=>{n(e)}};Pe(t.value,e),Pe(o.value,e),g()}),h(r,()=>g()),h(()=>e.color.value,()=>g());const y=f(()=>[u.b(),u.is("vertical",e.vertical),u.is("disabled",e.disabled)]),w=f(()=>u.e("bar")),x=f(()=>u.e("thumb"));return{rootKls:y,barKls:w,barStyle:f(()=>({background:b.value})),thumbKls:x,thumbStyle:f(()=>({left:_(c.value),top:_(d.value)})),thumbLeft:c,thumbTop:d,update:g}},Me=["aria-label","aria-valuenow","aria-valuetext","aria-orientation","tabindex","aria-disabled"];var He=w(x(i(s({},{name:"ElColorAlphaSlider"}),{__name:"alpha-slider",props:Le,setup(e,{expose:a}){const l=e,{currentValue:t,bar:o,thumb:r,handleDrag:n,handleClick:s,handleKeydown:i}=Te(l,{key:"alpha",minValue:0,maxValue:100}),{rootKls:u,barKls:c,barStyle:d,thumbKls:p,thumbStyle:v,update:h}=Fe(l,{namespace:"color-alpha-slider",maxValue:100,currentValue:t,bar:o,thumb:r,handleDrag:n,getBackground:function(){if(l.color&&l.color.value){const{r:e,g:a,b:t}=l.color.toRgb();return`linear-gradient(to right, rgba(${e}, ${a}, ${t}, 0) 0%, rgba(${e}, ${a}, ${t}, 1) 100%)`}return""}}),{t:m}=V(),b=f(()=>m("el.colorpicker.alphaLabel")),g=f(()=>m("el.colorpicker.alphaDescription",{alpha:t.value,color:l.color.value}));return a({update:h,bar:o,thumb:r}),(e,a)=>(C(),S("div",{class:A(K(u))},[E("div",{ref_key:"bar",ref:o,class:A(K(c)),style:j(K(d)),onClick:a[0]||(a[0]=(...e)=>K(s)&&K(s)(...e))},null,6),E("div",{ref_key:"thumb",ref:r,class:A(K(p)),style:j(K(v)),"aria-label":b.value,"aria-valuenow":K(t),"aria-valuetext":g.value,"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,role:"slider",tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,onKeydown:a[1]||(a[1]=(...e)=>K(i)&&K(i)(...e))},null,46,Me)],2))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker-panel/src/components/alpha-slider.vue"]]);const Ie=["aria-label","aria-valuenow","aria-valuetext","aria-orientation","tabindex","aria-disabled"];var We=w(x(i(s({},{name:"ElColorHueSlider"}),{__name:"hue-slider",props:Oe,setup(e,{expose:a}){const l=e,{currentValue:t,bar:o,thumb:r,handleDrag:n,handleClick:s,handleKeydown:i}=Te(l,{key:"hue",minValue:0,maxValue:360}),{rootKls:u,barKls:c,thumbKls:d,thumbStyle:p,thumbTop:v,update:h}=Fe(l,{namespace:"color-hue-slider",maxValue:360,currentValue:t,bar:o,thumb:r,handleDrag:n}),{t:m}=V(),b=f(()=>m("el.colorpicker.hueLabel")),g=f(()=>m("el.colorpicker.hueDescription",{hue:t.value,color:l.color.value}));return a({bar:o,thumb:r,thumbTop:v,update:h}),(e,a)=>(C(),S("div",{class:A(K(u))},[E("div",{ref_key:"bar",ref:o,class:A(K(c)),onClick:a[0]||(a[0]=(...e)=>K(s)&&K(s)(...e))},null,2),E("div",{ref_key:"thumb",ref:r,class:A(K(d)),style:j(K(p)),"aria-label":b.value,"aria-valuenow":K(t),"aria-valuetext":g.value,"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":360,role:"slider",tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,onKeydown:a[1]||(a[1]=(...e)=>K(i)&&K(i)(...e))},null,46,Ie)],2))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker-panel/src/components/hue-slider.vue"]]);const qe=u({colors:{type:c(Array),required:!0},color:{type:c(Object),required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean}),ze=u({modelValue:{type:c(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:c(Array)},validateEvent:{type:Boolean,default:!0}}),Ue={[ke]:e=>B(e)||D(e)},Xe=Symbol("colorCommonPickerKey"),Ye=Symbol("colorPickerPanelContextKey");class Ne{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new de,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const a in e)L(e,a)&&(this[a]=e[a]);e.value?this.fromString(e.value):this.doOnChange()}set(e,a){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=a,this._isValid=!0,this.doOnChange();else for(const l in e)L(e,l)&&this.set(l,e[l])}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const a=new de(e);if(this._isValid=a.isValid,a.isValid){const{h:e,s:l,v:t,a:o}=a.toHsv();this._hue=e,this._saturation=100*l,this._value=100*t,this._alpha=100*o}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}clear(){this._isValid=!1,this.value="",this._hue=0,this._saturation=100,this._value=100,this._alpha=100}compare(e){const a=new de({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(a)}doOnChange(){const{_hue:e,_saturation:a,_value:l,_alpha:t,format:o,enableAlpha:r}=this;let n=o||(r?"rgb":"hex");"hex"===o&&r&&(n="hex8"),this._tiny=new de({h:e,s:a/100,v:l/100,a:t/100}),this.value=this._isValid?this._tiny.toString(n):""}}const Qe=["disabled","aria-label","onClick"];var Ze=w(x(i(s({},{name:"ElColorPredefine"}),{__name:"predefine",props:qe,setup(e){const a=e,{rgbaColors:l,handleSelect:t}=(e=>{const{currentColor:a}=O(Ye),l=m(t(e.colors,e.color));function t(a,l){return a.map(a=>{const t=new Ne({value:a,enableAlpha:e.enableAlpha});return t.selected=t.compare(l),t})}return h(()=>a.value,a=>{const t=new Ne({value:a,enableAlpha:e.enableAlpha});l.value.forEach(e=>{e.selected=t.compare(e)})}),$(()=>{l.value=t(e.colors,e.color)}),{rgbaColors:l,handleSelect:function(a){e.color.fromString(e.colors[a])}}})(a),{rootKls:o,colorsKls:r,colorSelectorKls:n}=(e=>{const a=p("color-predefine");return{rootKls:f(()=>[a.b(),a.is("disabled",e.disabled)]),colorsKls:f(()=>a.e("colors")),colorSelectorKls:function(e){return[a.e("color-selector"),a.is("alpha",e.get("alpha")<100),{selected:e.selected}]}}})(a),{t:s}=V();return(e,a)=>(C(),S("div",{class:A(K(o))},[E("div",{class:A(K(r))},[(C(!0),S(P,null,R(K(l),(a,l)=>{return C(),S("button",{key:e.colors[l],type:"button",disabled:e.disabled,"aria-label":(o=a.value,s("el.colorpicker.predefineDescription",{value:o})),class:A(K(n)(a)),onClick:e=>K(t)(l)},[E("div",{style:j({backgroundColor:a.value})},null,4)],10,Qe);var o}),128))],2)],2))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker-panel/src/components/predefine.vue"]]);const Ge=u({color:{type:c(Object),required:!0},disabled:Boolean}),Je=["tabindex","aria-disabled","aria-label","aria-valuenow","aria-valuetext"];var ea=w(x(i(s({},{name:"ElSvPanel"}),{__name:"sv-panel",props:Ge,setup(e,{expose:a}){const l=e,{cursorRef:t,cursorTop:o,cursorLeft:r,background:n,saturation:s,brightness:i,handleClick:u,handleDrag:c,handleKeydown:d}=(e=>{const a=k(),l=m(),t=m(0),o=m(0),r=m("hsl(0, 100%, 50%)"),n=f(()=>e.color.get("saturation")),s=f(()=>e.color.get("value")),i=f(()=>e.color.get("hue"));function u(l){if(e.disabled)return;const r=a.vnode.el.getBoundingClientRect(),{clientX:n,clientY:s}=Re(l);let i=n-r.left,u=s-r.top;i=Math.max(0,i),i=Math.min(i,r.width),u=Math.max(0,u),u=Math.min(u,r.height),o.value=i,t.value=u,e.color.set({saturation:i/r.width*100,value:100-u/r.height*100})}function c(a){let l=n.value+a;l=l<0?0:l>100?100:l,e.color.set("saturation",l)}function d(a){let l=s.value+a;l=l<0?0:l>100?100:l,e.color.set("value",l)}return{cursorRef:l,cursorTop:t,cursorLeft:o,background:r,saturation:n,brightness:s,hue:i,handleClick:function(a){var t;e.disabled||(a.target!==l.value&&u(a),null==(t=l.value)||t.focus({preventScroll:!0}))},handleDrag:u,handleKeydown:function(a){if(e.disabled)return;const{shiftKey:l}=a,t=l?10:1;let o=!0;switch(b(a)){case g.left:c(-t);break;case g.right:c(t);break;case g.up:d(t);break;case g.down:d(-t);break;default:o=!1}o&&a.preventDefault()}}})(l),{rootKls:y,cursorKls:w,rootStyle:x,cursorStyle:B,update:D}=((e,{cursorTop:a,cursorLeft:l,background:t,handleDrag:o})=>{const r=k(),n=p("color-svpanel");function s(){const o=e.color.get("saturation"),n=e.color.get("value"),s=r.vnode.el,{clientWidth:i,clientHeight:u}=s;l.value=o*i/100,a.value=(100-n)*u/100,t.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}return v(()=>{Pe(r.vnode.el,{drag:e=>{o(e)},end:e=>{o(e)}}),s()}),h([()=>e.color.get("hue"),()=>e.color.get("value"),()=>e.color.value],()=>s()),{rootKls:f(()=>n.b()),cursorKls:f(()=>n.e("cursor")),rootStyle:f(()=>({backgroundColor:t.value})),cursorStyle:f(()=>({top:_(a.value),left:_(l.value)})),update:s}})(l,{cursorTop:o,cursorLeft:r,background:n,handleDrag:c}),{t:L}=V(),O=f(()=>L("el.colorpicker.svLabel")),$=f(()=>L("el.colorpicker.svDescription",{saturation:s.value,brightness:i.value,color:l.color.value}));return a({update:D}),(e,a)=>(C(),S("div",{class:A(K(y)),style:j(K(x)),onClick:a[1]||(a[1]=(...e)=>K(u)&&K(u)(...e))},[E("div",{ref_key:"cursorRef",ref:t,class:A(K(w)),style:j(K(B)),tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,role:"slider","aria-valuemin":"0,0","aria-valuemax":"100,100","aria-label":O.value,"aria-valuenow":`${K(s)},${K(i)}`,"aria-valuetext":$.value,onKeydown:a[0]||(a[0]=(...e)=>K(d)&&K(d)(...e))},null,46,Je)],6))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker-panel/src/components/sv-panel.vue"]]);const aa=(e,a)=>{const l=T(new Ne({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return h(()=>[e.colorFormat,e.showAlpha],()=>{l.enableAlpha=e.showAlpha,l.format=e.colorFormat||l.format,l.doOnChange(),a(ke,l.value)}),{color:l}};const la=z(w(x(i(s({},{name:"ElColorPickerPanel"}),{__name:"color-picker-panel",props:ze,emits:Ue,setup(e,{expose:a,emit:l}){const t=e,o=l,r=p("color-picker-panel"),{formItem:n}=Ve(),s=Se(),i=m(),u=m(),c=m(),d=m(),b=m(""),{color:g}=O(Xe,()=>aa(t,o),!0);function y(){g.fromString(b.value),g.value!==b.value&&(b.value=g.value)}function k(){var e;t.validateEvent&&(null==(e=null==n?void 0:n.validate)||e.call(n,"blur").catch(e=>Ke()))}function _(){var e,a,l;null==(e=i.value)||e.update(),null==(a=u.value)||a.update(),null==(l=c.value)||l.update()}return v(()=>{t.modelValue&&(b.value=g.value),F(_)}),h(()=>t.modelValue,e=>{e!==g.value&&(e?g.fromString(e):g.clear())}),h(()=>g.value,e=>{o(ke,e),b.value=e,t.validateEvent&&(null==n||n.validate("change").catch(e=>Ke()))}),q(Ye,{currentColor:f(()=>g.value)}),a({color:g,inputRef:d,update:_}),(e,a)=>(C(),S("div",{class:A([K(r).b(),K(r).is("disabled",K(s)),K(r).is("border",e.border)]),onFocusout:k},[E("div",{class:A(K(r).e("wrapper"))},[M(We,{ref_key:"hueRef",ref:i,class:"hue-slider",color:K(g),vertical:"",disabled:K(s)},null,8,["color","disabled"]),M(ea,{ref_key:"svRef",ref:u,color:K(g),disabled:K(s)},null,8,["color","disabled"])],2),e.showAlpha?(C(),H(He,{key:0,ref_key:"alphaRef",ref:c,color:K(g),disabled:K(s)},null,8,["color","disabled"])):I("v-if",!0),e.predefine?(C(),H(Ze,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:K(g),colors:e.predefine,disabled:K(s)},null,8,["enable-alpha","color","colors","disabled"])):I("v-if",!0),E("div",{class:A(K(r).e("footer"))},[M(K(we),{ref_key:"inputRef",ref:d,modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),"validate-event":!1,size:"small",disabled:K(s),onChange:y},null,8,["modelValue","disabled"]),W(e.$slots,"footer")],2)],34))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker-panel/src/color-picker-panel.vue"]])),ta=u(s(s({persistent:{type:Boolean,default:!0},modelValue:{type:c(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:{type:Boolean,default:void 0},clearable:{type:Boolean,default:!0},size:X,popperClass:fe.popperClass,popperStyle:fe.popperStyle,tabindex:{type:[String,Number],default:0},teleported:fe.teleported,appendTo:fe.appendTo,predefine:{type:c(Array)},validateEvent:{type:Boolean,default:!0}},U),ge(["ariaLabel"]))),oa={[ke]:e=>B(e)||D(e),[_e]:e=>B(e)||D(e),activeChange:e=>B(e)||D(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},ra=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"];const na=z(w(x(i(s({},{name:"ElColorPicker"}),{__name:"color-picker",props:ta,emits:oa,setup(e,{expose:a,emit:l}){const t=e,o=l,{t:r}=V(),n=p("color"),{formItem:s}=Ve(),i=Ee(),u=Se(),{valueOnClear:c,isEmptyValue:d}=Y(t,null),v=aa(t,o),{inputId:y,isLabeledByFormItem:k}=Ce(t,{formItemContext:s}),_=m(),w=m(),x=m(),S=m(!1),B=m(!1);let D=!0;const{isFocused:L,handleFocus:O,handleBlur:$}=xe(w,{disabled:u,beforeBlur(e){var a;return null==(a=_.value)?void 0:a.isFocusInsideContent(e)},afterBlur(){var e;ne(!1),ce(),t.validateEvent&&(null==(e=null==s?void 0:s.validate)||e.call(s,"blur").catch(e=>Ke()))}}),P=N(()=>{var e,a;return null!=(a=null==(e=x.value)?void 0:e.color)?a:v.color}),R=f(()=>ye(t,Object.keys(ze))),T=f(()=>t.modelValue||B.value?function(e,a){const{r:l,g:t,b:o,a:r}=e.toRgb();return a?`rgba(${l}, ${t}, ${o}, ${r})`:`rgb(${l}, ${t}, ${o})`}(P,t.showAlpha):"transparent"),W=f(()=>t.modelValue||B.value?P.value:""),z=f(()=>k.value?void 0:t.ariaLabel||r("el.colorpicker.defaultLabel")),U=f(()=>k.value?null==s?void 0:s.labelId:void 0),X=f(()=>[n.b("picker"),n.is("disabled",u.value),n.bm("picker",i.value),n.is("focused",L.value)]);function ne(e){S.value=e}const se=Ae(ne,100,{leading:!0});function ie(){u.value||ne(!0)}function ue(){se(!1),ce()}function ce(){F(()=>{t.modelValue?P.fromString(t.modelValue):(P.value="",F(()=>{B.value=!1}))})}function de(){u.value||(S.value&&ce(),se(!S.value))}function ve(){const e=d(P.value)?c.value:P.value;o(ke,e),o(_e,e),t.validateEvent&&(null==s||s.validate("change").catch(e=>Ke())),se(!1),F(()=>{const e=new Ne({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});P.compare(e)||ce()})}function he(){se(!1),o(ke,c.value),o(_e,c.value),t.modelValue!==c.value&&t.validateEvent&&(null==s||s.validate("change").catch(e=>Ke())),ce(),o("clear")}function me(){var e,a;null==(a=null==(e=null==x?void 0:x.value)?void 0:e.inputRef)||a.focus()}function fe(){S.value&&(ue(),L.value&&Be())}function ge(e){e.preventDefault(),e.stopPropagation(),ne(!1),ce()}function we(e){switch(b(e)){case g.enter:case g.numpadEnter:case g.space:e.preventDefault(),e.stopPropagation(),ie();break;case g.esc:ge(e)}}function Be(){w.value.focus()}return h(()=>W.value,e=>{D&&o("activeChange",e),D=!0}),h(()=>P.value,()=>{t.modelValue||B.value||(B.value=!0)}),h(()=>t.modelValue,e=>{e?e&&e!==P.value&&(D=!1,P.fromString(e)):B.value=!1}),h(()=>S.value,()=>{x.value&&F(x.value.update)}),q(Xe,v),a({color:P,show:ie,hide:ue,focus:Be,blur:function(){w.value.blur()}}),(e,a)=>(C(),H(K(be),{ref_key:"popper",ref:_,visible:S.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[K(n).be("picker","panel"),e.popperClass],"popper-style":e.popperStyle,"stop-popper-mouse-event":!1,pure:"",loop:"",role:"dialog",effect:"light",trigger:"click",teleported:e.teleported,transition:`${K(n).namespace.value}-zoom-in-top`,persistent:e.persistent,"append-to":e.appendTo,onShow:me,onHide:a[2]||(a[2]=e=>ne(!1))},{content:Q(()=>[G((C(),H(K(la),Z({ref_key:"pickerPanelRef",ref:x},R.value,{border:!1,"validate-event":!1,onKeydown:te(ge,["esc"])}),{footer:Q(()=>[E("div",null,[e.clearable?(C(),H(K(pe),{key:0,class:A(K(n).be("footer","link-btn")),text:"",size:"small",onClick:he},{default:Q(()=>[oe(re(K(r)("el.colorpicker.clear")),1)]),_:1},8,["class"])):I("v-if",!0),M(K(pe),{plain:"",size:"small",class:A(K(n).be("footer","btn")),onClick:ve},{default:Q(()=>[oe(re(K(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])])]),_:1},16)),[[K(je),fe,w.value]])]),default:Q(()=>[E("div",Z({id:K(y),ref_key:"triggerRef",ref:w},e.$attrs,{class:X.value,role:"button","aria-label":z.value,"aria-labelledby":U.value,"aria-description":K(r)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":K(u),tabindex:K(u)?void 0:e.tabindex,onKeydown:we,onFocus:a[0]||(a[0]=(...e)=>K(O)&&K(O)(...e)),onBlur:a[1]||(a[1]=(...e)=>K($)&&K($)(...e))}),[E("div",{class:A(K(n).be("picker","trigger")),onClick:de},[E("span",{class:A([K(n).be("picker","color"),K(n).is("alpha",e.showAlpha)])},[E("span",{class:A(K(n).be("picker","color-inner")),style:j({backgroundColor:T.value})},[G(M(K(J),{class:A([K(n).be("picker","icon"),K(n).is("icon-arrow-down")])},{default:Q(()=>[M(K(ee))]),_:1},8,["class"]),[[ae,e.modelValue||B.value]]),G(M(K(J),{class:A([K(n).be("picker","empty"),K(n).is("icon-close")])},{default:Q(()=>[M(K(le))]),_:1},8,["class"]),[[ae,!e.modelValue&&!B.value]])],6)],2)],2)],16,ra)]),_:1},8,["visible","popper-class","popper-style","teleported","transition","persistent","append-to"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]])),sa={class:"dialog-footer"},ia=x({__name:"dict-dialog",emits:["success"],setup(e,{expose:a,emit:l}){const n=l,u=ne(),{getDictMap:c}=se(u),d=m(),p=m({visible:!1,loading:!1}),v={typeId:"",dictTypeName:"",label:"",code:"",value:"",i18nScope:"1",status:"1",sort:0,color:"",remark:""},h=m({data:me(v),items:f(()=>{var e,a;return[{label:"所属类型",key:"dictTypeName",type:"input",span:24,props:{placeholder:"请输入所属类型",clearable:!0,disabled:!0}},{label:"字典标签",key:"label",type:"input",props:{placeholder:"请输入字典标签",clearable:!0}},{label:"字典编码",key:"code",type:"input",props:{placeholder:"请输入字典编码",clearable:!0}},{label:"字典值",key:"value",type:"input",props:{placeholder:"请输入字典值",clearable:!0}},{label:"国际化",key:"i18n",type:"input",props:{placeholder:"请输入国际化",clearable:!0}},{label:"国际化范围",key:"i18nScope",type:"radiogroup",props:{options:null!=(e=c.value.i18nScope)?e:[]}},{label:"状态",key:"status",type:"radiogroup",props:{options:null!=(a=c.value.status)?a:[]}},{label:"排序",key:"sort",type:"number",props:{placeholder:"请输入排序"}},{label:"文字颜色",key:"color",slots:"color"},{label:"备注信息",key:"remark",type:"input",span:24,props:{placeholder:"请输入描述",type:"textarea",rows:4,clearable:!0}}]}),rules:f(()=>({label:[{required:!0,message:"字典标签不能为空",trigger:"change"}],code:[{required:!0,message:"字典编码不能为空",trigger:"change"},{validator:he({table:"dict",field:"code",getExcludeId:()=>{var e;return null==(e=h.value.data)?void 0:e.id},extraWhere:()=>{var e;return{type_id:null==(e=h.value.data)?void 0:e.typeId}},message:"字典编码已存在"}),trigger:"change"}],value:[{required:!0,message:"字典值不能为空",trigger:"change"}]}))}),b=()=>{g(),p.value=i(s({},K(p)),{visible:!1})},g=()=>{h.value.data=me(v)},y=()=>{return e=null,a=null,l=function*(){if(d.value)try{yield d.value.validate();try{p.value.loading=!0;const{data:e}=h.value,a=e,{id:l}=a,u=((e,a)=>{var l={};for(var n in e)o.call(e,n)&&a.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&t)for(var n of t(e))a.indexOf(n)<0&&r.call(e,n)&&(l[n]=e[n]);return l})(a,["id"]),c=De(s({},u),["dictTypeName"]);k.value?yield ue(i(s({},c),{id:l})):yield ie(c),yield ne().fetchDictList(),n("success"),b()}finally{p.value.loading=!1}}catch(e){}},new Promise((t,o)=>{var r=e=>{try{s(l.next(e))}catch(a){o(a)}},n=e=>{try{s(l.throw(e))}catch(a){o(a)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);s((l=l.apply(e,a)).next())});var e,a,l};a({handleOpen:(e={})=>{p.value=i(s({},K(p)),{visible:!0}),Be(e)||(h.value.data=s(s({},h.value.data),e))}});const k=f(()=>{var e;return!!(null==(e=h.value.data)?void 0:e.id)});return(e,a)=>{const l=na,t=pe,o=ce;return C(),H(o,{modelValue:K(p).visible,"onUpdate:modelValue":a[2]||(a[2]=e=>K(p).visible=e),title:K(k)?"编辑字典":"新增字典",width:"60%","align-center":"","destroy-on-close":"",onClose:b},{footer:Q(()=>[E("span",sa,[M(t,{onClick:b},{default:Q(()=>[...a[3]||(a[3]=[oe("取 消",-1)])]),_:1}),M(t,{type:"primary",onClick:y,loading:K(p).loading},{default:Q(()=>[...a[4]||(a[4]=[oe("确 定",-1)])]),_:1},8,["loading"])])]),default:Q(()=>[M(ve,{ref_key:"formRef",ref:d,modelValue:K(h).data,"onUpdate:modelValue":a[1]||(a[1]=e=>K(h).data=e),items:K(h).items,rules:K(h).rules,span:12,gutter:20,"label-width":"100px","show-reset":!1,"show-submit":!1},{color:Q(()=>[M(l,{modelValue:K(h).data.color,"onUpdate:modelValue":a[0]||(a[0]=e=>K(h).data.color=e),predefine:["#67C23A","#E6A23C","#F56C6C","#909399"]},null,8,["modelValue"])]),_:1},8,["modelValue","items","rules"])]),_:1},8,["modelValue","title"])}}});export{ia as _};
