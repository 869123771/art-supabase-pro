var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,i=(e,a)=>{for(var s in a||(a={}))l.call(a,s)&&o(e,s,a[s]);if(t)for(var s of t(a))r.call(a,s)&&o(e,s,a[s]);return e},n=(e,t)=>a(e,s(t));import{a9 as d,e2 as u,w as c,bh as f,a as v,p,m as b,d6 as m,b7 as y,_ as h,d as w,b4 as g,W as z,bw as k,b as E,y as C,z as A,k as R,Y as _,u as j,H as x,f as O,X as F,aE as L,g as P,c as $,r as S,j as T,h as B,a5 as H,cK as I,e as D,a6 as M,ao as q}from"./index-Dp_GRdij.js";import{E as X}from"./index-CjiF4d6W.js";import{E as Y,b as W}from"./focus-trap-BuAZGuAO.js";import{c as K,e as N,u as U}from"./el-overlay-113k3ltl.js";import{c as G}from"./index-CV23GvbI.js";const J=d(n(i({},N),{direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}})),Q=n(i({},K),{"resize-start":(e,a)=>e instanceof MouseEvent&&"number"==typeof a,resize:(e,a)=>e instanceof MouseEvent&&"number"==typeof a,"resize-end":(e,a)=>e instanceof MouseEvent&&"number"==typeof a});function V(e,a,s){const{width:t,height:l}=u(),r=p(()=>["ltr","rtl"].includes(e.direction)),o=p(()=>["ltr","ttb"].includes(e.direction)?1:-1),i=p(()=>r.value?t.value:l.value),n=p(()=>m(d.value+o.value*h.value,4,i.value)),d=b(0),h=b(0),w=b(!1),g=b(!1);let z=[],k=[];c(()=>[e.size,e.resizable],()=>{g.value=!1,d.value=0,h.value=0,C()});const E=e=>{const{pageX:a,pageY:t}=e,l=a-z[0],o=t-z[1];h.value=r.value?l:o,s("resize",e,n.value)},C=e=>{w.value&&(z=[],d.value=n.value,h.value=0,w.value=!1,k.forEach(e=>null==e?void 0:e()),k=[],e&&s("resize-end",e,d.value))},A=f(a,"mousedown",t=>{e.resizable&&(g.value||(d.value=(()=>{var e;const s=null==(e=a.value)?void 0:e.closest('[aria-modal="true"]');return s?r.value?s.offsetWidth:s.offsetHeight:100})(),g.value=!0),z=[t.pageX,t.pageY],w.value=!0,s("resize-start",t,d.value),k.push(f(window,"mouseup",C),f(window,"mousemove",E)))});return v(()=>{A(),C()}),{size:p(()=>g.value?`${n.value}px`:y(e.size)),isResizing:w,isHorizontal:r}}const Z=["aria-label","aria-labelledby","aria-describedby"],ee=["id","aria-level"],ae=["aria-label"],se=["id"];const te=q(h(w(n(i({},{name:"ElDrawer",inheritAttrs:!1}),{__name:"drawer",props:J,emits:Q,setup(e,{expose:a,emit:s}){const t=e,l=s,r=g();G({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},p(()=>!!r.title));const o=b(),i=b(),n=b(),d=z("drawer"),{t:u}=k(),{afterEnter:c,afterLeave:f,beforeLeave:v,visible:m,rendered:y,titleId:h,bodyId:w,zIndex:q,onModalClick:K,onOpenAutoFocus:N,onCloseAutoFocus:J,onFocusoutPrevented:Q,onCloseRequested:te,handleClose:le}=U(t,o),{isHorizontal:re,size:oe,isResizing:ie}=V(t,n,l),ne=p(()=>t.modalPenetrable&&!t.modal);return a({handleClose:le,afterEnter:c,afterLeave:f}),(e,a)=>(E(),C(j(W),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:A(()=>[R(_,{name:j(d).b("fade"),onAfterEnter:j(c),onAfterLeave:j(f),onBeforeLeave:j(v),persisted:""},{default:A(()=>{var s;return[x(R(j(X),{mask:e.modal,"overlay-class":[j(d).is("drawer"),null!=(s=e.modalClass)?s:"",`${j(d).namespace.value}-modal-drawer`,j(d).is("penetrable",ne.value)],"z-index":j(q),onClick:j(K)},{default:A(()=>[R(j(Y),{loop:"",trapped:j(m),"focus-trap-el":o.value,"focus-start-el":i.value,onFocusAfterTrapped:j(N),onFocusAfterReleased:j(J),onFocusoutPrevented:j(Q),onReleaseRequested:j(te)},{default:A(()=>[O("div",F({ref_key:"drawerRef",ref:o,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:j(h),"aria-describedby":j(w)},e.$attrs,{class:[j(d).b(),e.direction,j(m)&&"open",j(d).is("dragging",j(ie))],style:{[j(re)?"width":"height"]:j(oe)},role:"dialog",onClick:a[1]||(a[1]=L(()=>{},["stop"]))}),[O("span",{ref_key:"focusStartRef",ref:i,class:P(j(d).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(E(),$("header",{key:0,class:P([j(d).e("header"),e.headerClass])},[e.$slots.title?S(e.$slots,"title",{key:1},()=>[B(" DEPRECATED SLOT ")]):S(e.$slots,"header",{key:0,close:j(le),titleId:j(h),titleClass:j(d).e("title")},()=>[O("span",{id:j(h),role:"heading","aria-level":e.headerAriaLevel,class:P(j(d).e("title"))},T(e.title),11,ee)]),e.showClose?(E(),$("button",{key:2,"aria-label":j(u)("el.drawer.close"),class:P(j(d).e("close-btn")),type:"button",onClick:a[0]||(a[0]=(...e)=>j(le)&&j(le)(...e))},[R(j(H),{class:P(j(d).e("close"))},{default:A(()=>[R(j(I))]),_:1},8,["class"])],10,ae)):B("v-if",!0)],2)):B("v-if",!0),j(y)?(E(),$("div",{key:1,id:j(w),class:P([j(d).e("body"),e.bodyClass])},[S(e.$slots,"default")],10,se)):B("v-if",!0),e.$slots.footer?(E(),$("div",{key:2,class:P([j(d).e("footer"),e.footerClass])},[S(e.$slots,"footer")],2)):B("v-if",!0),e.resizable?(E(),$("div",{key:3,ref_key:"draggerRef",ref:n,style:D({zIndex:j(q)}),class:P(j(d).e("dragger"))},null,6)):B("v-if",!0)],16,Z)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[M,j(m)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]));export{te as E};
