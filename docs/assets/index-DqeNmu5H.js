var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&u(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&u(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{bP as o,bY as d,ah as c,a1 as m,aj as p,b7 as b,_ as v,d as f,b3 as y,W as N,a as g,r as x,c as V,a5 as E,w as h,o as I,bQ as S,e as w,f as A,H as _,k as j,p as O,u as F,B as M,i as k,j as $,z as B,y as P,a3 as D,dV as L,aa as T,cY as K,dW as z,cc as C,aE as G,a9 as R,U as X,dX as U,V as W,ao as Y}from"./index-UHpcR4FB.js";import{E as H}from"./index-DsVoTwVl.js";import{u as J,d as Q,t as q}from"./index-C5rzeD65.js";import{U as Z,I as ee,C as ae}from"./event-BwRzfsZt.js";import{a as te,b as le,u as re}from"./index-CZuR-eJU.js";const ne=100,ue=600,ie={beforeMount(e,a){const t=a.value,{interval:l=ne,delay:r=ue}=o(t)?{}:t;let n,u;const i=()=>o(t)?t():t.handler(),s=()=>{u&&(clearTimeout(u),u=void 0),n&&(clearInterval(n),n=void 0)};e.addEventListener("mousedown",e=>{0===e.button&&(s(),i(),document.addEventListener("mouseup",()=>s(),{once:!0}),u=setTimeout(()=>{n=setInterval(()=>{i()},l)},r))})}},se=m(s(i({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:b,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||d(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}},J(["ariaLabel"])),{inputmode:{type:p(String),default:void 0},align:{type:p(String),default:"center"},disabledScientific:Boolean})),oe={[ae]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[ee]:e=>d(e)||c(e),[Z]:e=>d(e)||c(e)},de=f({name:"ElInputNumber"});const ce=Y(v(f(s(i({},de),{props:se,emits:oe,setup(e,{expose:a,emit:t}){const l=e,{t:r}=y(),n=N("input-number"),u=g(),i=x({currentValue:l.modelValue,userInput:null}),{formItem:s}=te(),o=V(()=>d(l.modelValue)&&l.modelValue<=l.min),m=V(()=>d(l.modelValue)&&l.modelValue>=l.max),p=V(()=>{const e=ne(l.step);return E(l.precision)?Math.max(ne(l.modelValue),e):(l.precision,l.precision)}),b=V(()=>l.controls&&"right"===l.controlsPosition),v=le(),f=re(),Y=V(()=>{if(null!==i.userInput)return i.userInput;let e=i.currentValue;if(c(e))return"";if(d(e)){if(Number.isNaN(e))return"";E(l.precision)||(e=e.toFixed(l.precision))}return e}),J=(e,a)=>{if(E(a)&&(a=p.value),0===a)return Math.round(e);let t=String(e);const l=t.indexOf(".");if(-1===l)return e;if(!t.replace(".","").split("")[l+a])return e;const r=t.length;return"5"===t.charAt(r-1)&&(t=`${t.slice(0,Math.max(0,r-1))}6`),Number.parseFloat(Number(t).toFixed(a))},ne=e=>{if(c(e))return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l},ue=(e,a=1)=>d(e)?e>=Number.MAX_SAFE_INTEGER&&1===a||e<=Number.MIN_SAFE_INTEGER&&-1===a?e:J(e+l.step*a):i.currentValue,se=e=>{const a=X(e),t=U(e);if(l.disabledScientific&&["e","E"].includes(t))e.preventDefault();else switch(a){case W.up:e.preventDefault(),oe();break;case W.down:e.preventDefault(),de()}},oe=()=>{if(l.readonly||f.value||m.value)return;const e=Number(Y.value)||0,a=ue(e);me(a),t(ee,i.currentValue),ye()},de=()=>{if(l.readonly||f.value||o.value)return;const e=Number(Y.value)||0,a=ue(e,-1);me(a),t(ee,i.currentValue),ye()},ce=(e,a)=>{const{max:r,min:n,step:u,precision:i,stepStrictly:s,valueOnClear:o}=l;r<n&&q("InputNumber","min should not be greater than max.");let d=Number(e);if(c(e)||Number.isNaN(d))return null;if(""===e){if(null===o)return null;d=R(o)?{min:n,max:r}[o]:o}return s&&(d=J(Math.round(d/u)*u,i),d!==e&&a&&t(Z,d)),E(i)||(d=J(d,i)),(d>r||d<n)&&(d=d>r?r:n,a&&t(Z,d)),d},me=(e,a=!0)=>{var r;const n=i.currentValue,u=ce(e);a?n===u&&e||(i.userInput=null,t(Z,u),n!==u&&t(ae,u,n),l.validateEvent&&(null==(r=null==s?void 0:s.validate)||r.call(s,"change").catch(e=>Q())),i.currentValue=u):t(Z,u)},pe=e=>{i.userInput=e;const a=""===e?null:Number(e);t(ee,a),me(a,!1)},be=e=>{const a=""!==e?Number(e):"";(d(a)&&!Number.isNaN(a)||""===e)&&me(a),ye(),i.userInput=null},ve=e=>{t("focus",e)},fe=e=>{var a,r;i.userInput=null,null===i.currentValue&&(null==(a=u.value)?void 0:a.input)&&(u.value.input.value=""),t("blur",e),l.validateEvent&&(null==(r=null==s?void 0:s.validate)||r.call(s,"blur").catch(e=>Q()))},ye=()=>{i.currentValue!==l.modelValue&&(i.currentValue=l.modelValue)},Ne=e=>{document.activeElement===e.target&&e.preventDefault()};return h(()=>l.modelValue,(e,a)=>{const t=ce(e,!0);null===i.userInput&&t!==a&&(i.currentValue=t)},{immediate:!0}),h(()=>l.precision,()=>{i.currentValue=ce(l.modelValue)}),I(()=>{var e;const{min:a,max:r,modelValue:n}=l,s=null==(e=u.value)?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(r)?s.setAttribute("aria-valuemax",String(r)):s.removeAttribute("aria-valuemax"),Number.isFinite(a)?s.setAttribute("aria-valuemin",String(a)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",i.currentValue||0===i.currentValue?String(i.currentValue):""),s.setAttribute("aria-disabled",String(f.value)),!d(n)&&null!=n){let e=Number(n);Number.isNaN(e)&&(e=null),t(Z,e)}s.addEventListener("wheel",Ne,{passive:!1})}),S(()=>{var e,a;const t=null==(e=u.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${null!=(a=i.currentValue)?a:""}`)}),a({focus:()=>{var e,a;null==(a=null==(e=u.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=u.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(A(),w("div",{class:k([F(n).b(),F(n).m(F(v)),F(n).is("disabled",F(f)),F(n).is("without-controls",!e.controls),F(n).is("controls-right",F(b)),F(n).is(e.align,!!e.align)]),onDragstart:G(()=>{},["prevent"])},[e.controls?_((A(),w("span",{key:0,role:"button","aria-label":F(r)("el.inputNumber.decrease"),class:k([F(n).e("decrease"),F(n).is("disabled",F(o))]),onKeydown:M(de,["enter"])},[$(e.$slots,"decrease-icon",{},()=>[O(F(T),null,{default:B(()=>[F(b)?(A(),P(F(D),{key:0})):(A(),P(F(L),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[F(ie),de]]):j("v-if",!0),e.controls?_((A(),w("span",{key:1,role:"button","aria-label":F(r)("el.inputNumber.increase"),class:k([F(n).e("increase"),F(n).is("disabled",F(m))]),onKeydown:M(oe,["enter"])},[$(e.$slots,"increase-icon",{},()=>[O(F(T),null,{default:B(()=>[F(b)?(A(),P(F(K),{key:0})):(A(),P(F(z),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[F(ie),oe]]):j("v-if",!0),O(F(H),{id:e.id,ref_key:"input",ref:u,type:"number",step:e.step,"model-value":F(Y),placeholder:e.placeholder,readonly:e.readonly,disabled:F(f),size:F(v),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeyup:se,onBlur:fe,onFocus:ve,onInput:pe,onChange:be},C({_:2},[e.$slots.prefix?{name:"prefix",fn:B(()=>[$(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:B(()=>[$(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}})),[["__file","input-number.vue"]]));export{ce as E,ie as v};
