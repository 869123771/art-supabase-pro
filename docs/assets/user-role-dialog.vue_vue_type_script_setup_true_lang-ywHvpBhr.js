var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,i=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&r(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&r(e,a,l[a]);return e},n=(e,o)=>l(e,a(o)),u=(e,l,a)=>new Promise((o,s)=>{var t=e=>{try{i(a.next(e))}catch(l){s(l)}},r=e=>{try{i(a.throw(e))}catch(l){s(l)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,r);i((a=a.apply(e,l)).next())});import{d as p,a as d,c as m,o as c,y as v,f,z as y,p as b,u as g,h as j,l as _,e5 as h,e6 as w}from"./index-CSMnfbno.js";import{E as O}from"./el-dialog-D_Pkvt-7.js";import"./el-overlay-ZKdz0fk-.js";import{E as x}from"./el-button-D6QoVWRW.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-Z9YAU5D6.js";import{c as V}from"./cloneDeep-DYvNsBPA.js";import{i as R}from"./isEmpty-BH9Ay-Eb.js";const C={class:"dialog-footer"},E=p({__name:"user-role-dialog",emits:["success"],setup(e,{expose:l,emit:a}){const o=a,s=d({visible:!1,loading:!1}),t={userRoles:[]},r=d({data:V(t),items:m(()=>{var e,l;return[{label:"角色",key:"userRoles",type:"select",props:{multiple:!0,options:null!=(l=null==(e=p.value)?void 0:e.roles)?l:[]}}]}),rules:m(()=>({}))}),p=d({roles:[]}),E=()=>{r.value.data=V(t),s.value=n(i({},g(s)),{visible:!1})},k=()=>u(null,null,function*(){try{s.value.loading=!0;const{data:e}=r.value,l=i({},e);yield h(l),o("success"),E()}finally{s.value.loading=!1}});return c(()=>{u(null,null,function*(){const{data:e}=yield w();p.value=n(i({},g(p)),{roles:e.map(({roleCode:e,roleName:l})=>({label:l,value:e}))})})}),l({handleOpen:(e={})=>{if(s.value=n(i({},g(s)),{visible:!0}),!R(e)){const{id:l,userRoles:a=[]}=e;r.value.data={userRoles:a,id:l}}}}),(e,l)=>{const a=x,o=O;return f(),v(o,{modelValue:g(s).visible,"onUpdate:modelValue":l[1]||(l[1]=e=>g(s).visible=e),title:"赋予角色",width:"50%","align-center":"","destroy-on-close":"",onClose:E},{footer:y(()=>[j("span",C,[b(a,{onClick:E},{default:y(()=>[...l[2]||(l[2]=[_("取 消",-1)])]),_:1}),b(a,{type:"primary",onClick:k,loading:g(s).loading},{default:y(()=>[...l[3]||(l[3]=[_("确 定",-1)])]),_:1},8,["loading"])])]),default:y(()=>[b(P,{class:"pr-4",ref:"formRef",modelValue:g(r).data,"onUpdate:modelValue":l[0]||(l[0]=e=>g(r).data=e),items:g(r).items,rules:g(r).rules,span:24,gutter:20,"label-width":"80px","show-reset":!1,"show-submit":!1},null,8,["modelValue","items","rules"])]),_:1},8,["modelValue"])}}});export{E as _};
