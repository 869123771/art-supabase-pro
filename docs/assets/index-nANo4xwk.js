var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,i=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&u(e,t,a[t]);if(r)for(var t of r(a))n.call(a,t)&&u(e,t,a[t]);return e},s=(e,r)=>a(e,t(r));import{b2 as o,bd as m,al as d,a9 as c,bb as p,ab as v,_ as b,d as f,bw as y,W as N,l as g,w as x,o as E,b3 as V,b as h,c as I,H as S,u as w,B as _,g as A,r as j,k,z as O,y as F,ac as M,dS as $,a5 as B,h as L,cE as P,dT as T,bv as D,aE as C,m as R,p as z,a4 as G,ae as K,U,dU as X,V as H,ao as W}from"./index-Dp_GRdij.js";import{E as q}from"./index-6gY0_SfG.js";import{u as J}from"./index-QUPeURfZ.js";import{U as Q,I as Y,C as Z}from"./event-BwRzfsZt.js";import{u as ee}from"./use-form-item-45aK5G8L.js";import{d as ae,t as te}from"./error-D_Dr4eZ1.js";import{u as re,d as le}from"./index-CV23GvbI.js";const ne=100,ue=600,ie="_RepeatClick",se={beforeMount(e,a){const t=a.value,{interval:r=ne,delay:l=ue}=o(t)?{}:t;let n,u;const i=()=>o(t)?t():t.handler(),s=()=>{u&&(clearTimeout(u),u=void 0),n&&(clearInterval(n),n=void 0)},m=e=>{0===e.button&&(s(),i(),document.addEventListener("mouseup",s,{once:!0}),u=setTimeout(()=>{n=setInterval(()=>{i()},r)},l))};e[ie]={start:m,clear:s},e.addEventListener("mousedown",m)},unmounted(e){if(!e[ie])return;const{start:a,clear:t}=e[ie];a&&e.removeEventListener("mousedown",a),t&&(t(),document.removeEventListener("mouseup",t)),e[ie]=null}},oe=c(s(i({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:{type:Boolean,default:void 0},size:p,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:v([String,Number,null]),validator:e=>null===e||m(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}},J(["ariaLabel"])),{inputmode:{type:v(String),default:void 0},align:{type:v(String),default:"center"},disabledScientific:Boolean})),me={[Z]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[Y]:e=>m(e)||d(e),[Q]:e=>m(e)||d(e)},de=["aria-label"],ce=["aria-label"];const pe=W(b(f(s(i({},{name:"ElInputNumber"}),{__name:"input-number",props:oe,emits:me,setup(e,{expose:a,emit:t}){const r=e,l=t,{t:n}=y(),u=N("input-number"),i=R(),s=g({currentValue:r.modelValue,userInput:null}),{formItem:o}=ee(),c=z(()=>m(r.modelValue)&&r.modelValue<=r.min),p=z(()=>m(r.modelValue)&&r.modelValue>=r.max),v=z(()=>{const e=ue(r.step);return K(r.precision)?Math.max(ue(r.modelValue),e):(r.precision,r.precision)}),b=z(()=>r.controls&&"right"===r.controlsPosition),f=re(),W=le(),J=z(()=>{if(null!==s.userInput)return s.userInput;let e=s.currentValue;if(d(e))return"";if(m(e)){if(Number.isNaN(e))return"";K(r.precision)||(e=e.toFixed(r.precision))}return e}),ne=(e,a)=>{if(K(a)&&(a=v.value),0===a)return Math.round(e);let t=String(e);const r=t.indexOf(".");if(-1===r)return e;if(!t.replace(".","").split("")[r+a])return e;const l=t.length;return"5"===t.charAt(l-1)&&(t=`${t.slice(0,Math.max(0,l-1))}6`),Number.parseFloat(Number(t).toFixed(a))},ue=e=>{if(d(e))return 0;const a=e.toString(),t=a.indexOf(".");let r=0;return-1!==t&&(r=a.length-t-1),r},ie=(e,a=1)=>m(e)?e>=Number.MAX_SAFE_INTEGER&&1===a||e<=Number.MIN_SAFE_INTEGER&&-1===a?e:ne(e+r.step*a):s.currentValue,oe=e=>{const a=U(e),t=X(e);if(r.disabledScientific&&["e","E"].includes(t))e.preventDefault();else switch(a){case H.up:e.preventDefault(),me();break;case H.down:e.preventDefault(),pe()}},me=()=>{if(r.readonly||W.value||p.value)return;const e=Number(J.value)||0,a=ie(e);be(a),l(Y,s.currentValue),xe()},pe=()=>{if(r.readonly||W.value||c.value)return;const e=Number(J.value)||0,a=ie(e,-1);be(a),l(Y,s.currentValue),xe()},ve=(e,a)=>{const{max:t,min:n,step:u,precision:i,stepStrictly:s,valueOnClear:o}=r;t<n&&te("InputNumber","min should not be greater than max.");let m=Number(e);if(d(e)||Number.isNaN(m))return null;if(""===e){if(null===o)return null;m=G(o)?{min:n,max:t}[o]:o}return s&&(m=ne(Math.round(ne(m/u))*u,i),m!==e&&a&&l(Q,m)),K(i)||(m=ne(m,i)),(m>t||m<n)&&(m=m>t?t:n,a&&l(Q,m)),m},be=(e,a=!0)=>{var t;const n=s.currentValue,u=ve(e);a?(s.userInput=null,n===u&&e||(l(Q,u),n!==u&&l(Z,u,n),r.validateEvent&&(null==(t=null==o?void 0:o.validate)||t.call(o,"change").catch(e=>ae())),s.currentValue=u)):l(Q,u)},fe=e=>{s.userInput=e;const a=""===e?null:Number(e);l(Y,a),be(a,!1)},ye=e=>{const a=""!==e?Number(e):"";(m(a)&&!Number.isNaN(a)||""===e)&&be(a),xe(),s.userInput=null},Ne=e=>{l("focus",e)},ge=e=>{var a,t;s.userInput=null,null===s.currentValue&&(null==(a=i.value)?void 0:a.input)&&(i.value.input.value=""),l("blur",e),r.validateEvent&&(null==(t=null==o?void 0:o.validate)||t.call(o,"blur").catch(e=>ae()))},xe=()=>{s.currentValue!==r.modelValue&&(s.currentValue=r.modelValue)},Ee=e=>{document.activeElement===e.target&&e.preventDefault()};return x(()=>r.modelValue,(e,a)=>{const t=ve(e,!0);null===s.userInput&&t!==a&&(s.currentValue=t)},{immediate:!0}),x(()=>r.precision,()=>{s.currentValue=ve(r.modelValue)}),E(()=>{var e;const{min:a,max:t,modelValue:n}=r,u=null==(e=i.value)?void 0:e.input;if(u.setAttribute("role","spinbutton"),Number.isFinite(t)?u.setAttribute("aria-valuemax",String(t)):u.removeAttribute("aria-valuemax"),Number.isFinite(a)?u.setAttribute("aria-valuemin",String(a)):u.removeAttribute("aria-valuemin"),u.setAttribute("aria-valuenow",s.currentValue||0===s.currentValue?String(s.currentValue):""),u.setAttribute("aria-disabled",String(W.value)),!m(n)&&null!=n){let e=Number(n);Number.isNaN(e)&&(e=null),l(Q,e)}u.addEventListener("wheel",Ee,{passive:!1})}),V(()=>{var e,a;const t=null==(e=i.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${null!=(a=s.currentValue)?a:""}`)}),a({focus:()=>{var e,a;null==(a=null==(e=i.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=i.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(h(),I("div",{class:A([w(u).b(),w(u).m(w(f)),w(u).is("disabled",w(W)),w(u).is("without-controls",!e.controls),w(u).is("controls-right",b.value),w(u).is(e.align,!!e.align)]),onDragstart:a[0]||(a[0]=C(()=>{},["prevent"]))},[e.controls?S((h(),I("span",{key:0,role:"button","aria-label":w(n)("el.inputNumber.decrease"),class:A([w(u).e("decrease"),w(u).is("disabled",c.value)]),onKeydown:_(pe,["enter"])},[j(e.$slots,"decrease-icon",{},()=>[k(w(B),null,{default:O(()=>[b.value?(h(),F(w(M),{key:0})):(h(),F(w($),{key:1}))]),_:1})])],42,de)),[[w(se),pe]]):L("v-if",!0),e.controls?S((h(),I("span",{key:1,role:"button","aria-label":w(n)("el.inputNumber.increase"),class:A([w(u).e("increase"),w(u).is("disabled",p.value)]),onKeydown:_(me,["enter"])},[j(e.$slots,"increase-icon",{},()=>[k(w(B),null,{default:O(()=>[b.value?(h(),F(w(P),{key:0})):(h(),F(w(T),{key:1}))]),_:1})])],42,ce)),[[w(se),me]]):L("v-if",!0),k(w(q),{id:e.id,ref_key:"input",ref:i,type:"number",step:e.step,"model-value":J.value,placeholder:e.placeholder,readonly:e.readonly,disabled:w(W),size:w(f),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:oe,onBlur:ge,onFocus:Ne,onInput:fe,onChange:ye},D({_:2},[e.$slots.prefix?{name:"prefix",fn:O(()=>[j(e.$slots,"prefix")]),key:"0"}:void 0,e.$slots.suffix?{name:"suffix",fn:O(()=>[j(e.$slots,"suffix")]),key:"1"}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],34))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{pe as E,se as v};
