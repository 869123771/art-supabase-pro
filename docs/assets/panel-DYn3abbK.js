var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l)=>{for(var a in l||(l={}))i.call(l,a)&&s(e,a,l[a]);if(t)for(var a of t(l))n.call(l,a)&&s(e,a,l[a]);return e},r=(e,t)=>l(e,a(t)),c=(e,l,a)=>new Promise((t,i)=>{var n=e=>{try{o(a.next(e))}catch(l){i(l)}},s=e=>{try{o(a.throw(e))}catch(l){i(l)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,s);o((a=a.apply(e,l)).next())});import{bH as u,bY as d,a1 as f,aj as v,al as p,_ as m,d as g,cI as y,dd as b,de as h,b3 as k,W as x,cs as w,a as _,df as C,c as S,dg as j,aB as N,w as I,o as E,c0 as z,y as L,f as O,z as $,p as B,Y as T,h as A,g as P,i as R,u as V,k as Y,e as X,j as M,aE as D,aa as F,ba as H,M as U,aH as W,a4 as q,l as G,m as Z,dh as K,di as J,au as Q,dj as ee,dk as le,dl as ae,U as te,V as ie,n as ne,ao as se,c1 as oe,b$ as re,b2 as ce,ae as ue,X as de,cc as fe,ca as ve,cb as pe,cr as me,a9 as ge,dm as ye,dn as be,dp as he,dq as ke,af as xe,a5 as we,an as _e,N as Ce,ap as Se,bN as je,b7 as Ne,dr as Ie,r as Ee,ag as ze,a8 as Le,cL as Oe,cZ as $e,ds as Be,dt as Te,aF as Ae,du as Pe,dv as Re}from"./index-D2YTfifR.js";/* empty css                   *//* empty css                  */import{E as Ve}from"./el-button-BGDwCa_e.js";import{E as Ye,a as Xe}from"./el-empty-DAvtVguw.js";/* empty css               */import{d as Me,E as De}from"./el-option-Bsnz73AY.js";/* empty css                  *//* empty css                     *//* empty css                 */import{E as Fe,p as He}from"./el-space-FhLDRO5l.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-BaEpzhEY.js";import{A as We}from"./index-DKK_F0kh.js";import{E as qe}from"./overlay-4k8mTZ0e.js";/* empty css              */import{u as Ge}from"./index-_zpN7FnF.js";import{E as Ze,b as Ke}from"./index-BN-hNtD-.js";import{u as Je,d as Qe}from"./index-mSoNf1eL.js";import{C as el,U as ll}from"./event-BwRzfsZt.js";import{e as al,b as tl,u as il,a as nl,c as sl}from"./index-BbwQJKCm.js";import{b as ol,E as rl}from"./index-Djw89c9H.js";import{E as cl}from"./index-D1Jq2W1X.js";import{a as ul}from"./vnode-DarxO_lF.js";import{E as dl}from"./index-iw_V6QEH.js";import{_ as fl}from"./_plugin-vue_export-helper-BCo6x5W8.js";function vl(e,l,a){var t=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return u(a)&&(t="leading"in a?!!a.leading:t,i="trailing"in a?!!a.trailing:i),Me(e,l,{leading:t,maxWait:l,trailing:i})}const pl=f({urlList:{type:v(Array),default:()=>p([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:v(String)}}),ml={close:()=>!0,error:e=>e instanceof Event,switch:e=>d(e),rotate:e=>d(e)},gl=g({name:"ElImageViewer"});const yl=se(m(g(r(o({},gl),{props:pl,emits:ml,setup(e,{expose:l,emit:a}){var t;const i=e,n={CONTAIN:{name:"contain",icon:y(h)},ORIGINAL:{name:"original",icon:y(b)}};let s,c="";const{t:u}=k(),d=x("image-viewer"),{nextZIndex:f}=w(),v=_(),p=_(),m=C(),g=S(()=>{const{scale:e,minScale:l,maxScale:a}=i;return j(e,l,a)}),se=_(!0),oe=_(!1),re=_(i.initialIndex),ce=N(n.CONTAIN),ue=_({scale:g.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),de=_(null!=(t=i.zIndex)?t:f()),fe=S(()=>{const{urlList:e}=i;return e.length<=1}),ve=S(()=>0===re.value),pe=S(()=>re.value===i.urlList.length-1),me=S(()=>i.urlList[re.value]),ge=S(()=>[d.e("btn"),d.e("prev"),d.is("disabled",!i.infinite&&ve.value)]),ye=S(()=>[d.e("btn"),d.e("next"),d.is("disabled",!i.infinite&&pe.value)]),be=S(()=>{const{scale:e,deg:l,offsetX:a,offsetY:t,enableTransition:i}=ue.value;let s=a/e,o=t/e;const r=l*Math.PI/180,c=Math.cos(r),u=Math.sin(r);s=s*c+o*u,o=o*c-a/e*u;const d={transform:`scale(${e}) rotate(${l}deg) translate(${s}px, ${o}px)`,transition:i?"transform .3s":""};return ce.value.name===n.CONTAIN.name&&(d.maxWidth=d.maxHeight="100%"),d}),he=S(()=>`${re.value+1} / ${i.urlList.length}`);function ke(){m.stop(),null==s||s(),document.body.style.overflow=c,a("close")}function xe(){se.value=!1}function we(e){oe.value=!0,se.value=!1,a("error",e),e.target.alt=u("el.image.error")}function _e(e){if(se.value||0!==e.button||!v.value)return;ue.value.enableTransition=!1;const{offsetX:l,offsetY:a}=ue.value,t=e.pageX,i=e.pageY,n=vl(e=>{ue.value=r(o({},ue.value),{offsetX:l+e.pageX-t,offsetY:a+e.pageY-i})}),s=z(document,"mousemove",n);z(document,"mouseup",()=>{s()}),e.preventDefault()}function Ce(){ue.value={scale:g.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Se(){if(se.value||oe.value)return;const e=ae(n),l=Object.values(n),a=ce.value.name,t=(l.findIndex(e=>e.name===a)+1)%e.length;ce.value=n[e[t]],Ce()}function je(e){oe.value=!1;const l=i.urlList.length;re.value=(e+l)%l}function Ne(){ve.value&&!i.infinite||je(re.value-1)}function Ie(){pe.value&&!i.infinite||je(re.value+1)}function Ee(e,l={}){if(se.value||oe.value)return;const{minScale:t,maxScale:n}=i,{zoomRate:s,rotateDeg:r,enableTransition:c}=o({zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0},l);switch(e){case"zoomOut":ue.value.scale>t&&(ue.value.scale=Number.parseFloat((ue.value.scale/s).toFixed(3)));break;case"zoomIn":ue.value.scale<n&&(ue.value.scale=Number.parseFloat((ue.value.scale*s).toFixed(3)));break;case"clockwise":ue.value.deg+=r,a("rotate",ue.value.deg);break;case"anticlockwise":ue.value.deg-=r,a("rotate",ue.value.deg)}ue.value.enableTransition=c}function ze(e){var l;"pointer"===(null==(l=e.detail)?void 0:l.focusReason)&&e.preventDefault()}function Le(){i.closeOnPressEscape&&ke()}function Oe(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}return I(()=>g.value,e=>{ue.value.scale=e}),I(me,()=>{ne(()=>{const e=p.value;(null==e?void 0:e.complete)||(se.value=!0)})}),I(re,e=>{Ce(),a("switch",e)}),E(()=>{!function(){const e=vl(e=>{switch(te(e)){case ie.esc:i.closeOnPressEscape&&ke();break;case ie.space:Se();break;case ie.left:Ne();break;case ie.up:Ee("zoomIn");break;case ie.right:Ie();break;case ie.down:Ee("zoomOut")}}),l=vl(e=>{Ee((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});m.run(()=>{z(document,"keydown",e),z(document,"wheel",l)})}(),s=z("wheel",Oe,{passive:!1}),c=document.body.style.overflow,document.body.style.overflow="hidden"}),l({setActiveItem:je}),(e,l)=>(O(),L(V(Ke),{to:"body",disabled:!e.teleported},{default:$(()=>[B(T,{name:"viewer-fade",appear:""},{default:$(()=>[A("div",{ref_key:"wrapper",ref:v,tabindex:-1,class:R(V(d).e("wrapper")),style:P({zIndex:de.value})},[B(V(Ze),{loop:"",trapped:"","focus-trap-el":v.value,"focus-start-el":"container",onFocusoutPrevented:ze,onReleaseRequested:Le},{default:$(()=>[A("div",{class:R(V(d).e("mask")),onClick:D(l=>e.hideOnClickModal&&ke(),["self"])},null,10,["onClick"]),Y(" CLOSE "),A("span",{class:R([V(d).e("btn"),V(d).e("close")]),onClick:ke},[B(V(F),null,{default:$(()=>[B(V(H))]),_:1})],2),Y(" ARROW "),V(fe)?Y("v-if",!0):(O(),X(U,{key:0},[A("span",{class:R(V(ge)),onClick:Ne},[B(V(F),null,{default:$(()=>[B(V(W))]),_:1})],2),A("span",{class:R(V(ye)),onClick:Ie},[B(V(F),null,{default:$(()=>[B(V(q))]),_:1})],2)],64)),e.$slots.progress||e.showProgress?(O(),X("div",{key:1,class:R([V(d).e("btn"),V(d).e("progress")])},[M(e.$slots,"progress",{activeIndex:re.value,total:e.urlList.length},()=>[G(Z(V(he)),1)])],2)):Y("v-if",!0),Y(" ACTIONS "),A("div",{class:R([V(d).e("btn"),V(d).e("actions")])},[A("div",{class:R(V(d).e("actions__inner"))},[M(e.$slots,"toolbar",{actions:Ee,prev:Ne,next:Ie,reset:Se,activeIndex:re.value,setActiveItem:je},()=>[B(V(F),{onClick:e=>Ee("zoomOut")},{default:$(()=>[B(V(K))]),_:1},8,["onClick"]),B(V(F),{onClick:e=>Ee("zoomIn")},{default:$(()=>[B(V(J))]),_:1},8,["onClick"]),A("i",{class:R(V(d).e("actions__divider"))},null,2),B(V(F),{onClick:Se},{default:$(()=>[(O(),L(Q(V(ce).icon)))]),_:1}),A("i",{class:R(V(d).e("actions__divider"))},null,2),B(V(F),{onClick:e=>Ee("anticlockwise")},{default:$(()=>[B(V(ee))]),_:1},8,["onClick"]),B(V(F),{onClick:e=>Ee("clockwise")},{default:$(()=>[B(V(le))]),_:1},8,["onClick"])])],2)],2),Y(" CANVAS "),A("div",{class:R(V(d).e("canvas"))},[oe.value&&e.$slots["viewer-error"]?M(e.$slots,"viewer-error",{key:0,activeIndex:re.value,src:V(me)}):(O(),X("img",{ref_key:"imgRef",ref:p,key:V(me),src:V(me),style:P(V(be)),class:R(V(d).e("img")),crossorigin:e.crossorigin,onLoad:xe,onError:we,onMousedown:_e},null,46,["src","crossorigin"]))],2),M(e.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}})),[["__file","image-viewer.vue"]])),bl=f({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:v([String,Object])},previewSrcList:{type:v(Array),default:()=>p([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:v(String)}}),hl={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>d(e),close:()=>!0,show:()=>!0},kl=g({name:"ElImage",inheritAttrs:!1});const xl=se(m(g(r(o({},kl),{props:bl,emits:hl,setup(e,{expose:l,emit:a}){const t=e,{t:i}=k(),n=x("image"),s=oe(),o=S(()=>re(Object.entries(s).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),r=ol({excludeListeners:!0,excludeKeys:S(()=>Object.keys(o.value))}),u=_(),d=_(!1),f=_(!0),v=_(!1),p=_(),m=_(),g=ce&&"loading"in HTMLImageElement.prototype;let y;const b=S(()=>[n.e("inner"),w.value&&n.e("preview"),f.value&&n.is("loading")]),h=S(()=>{const{fit:e}=t;return ce&&e?{objectFit:e}:{}}),w=S(()=>{const{previewSrcList:e}=t;return ue(e)&&e.length>0}),C=S(()=>{const{previewSrcList:e,initialIndex:l}=t;let a=l;return l>e.length-1&&(a=0),a}),j=S(()=>"eager"!==t.loading&&(!g&&"lazy"===t.loading||t.lazy)),N=()=>{ce&&(f.value=!0,d.value=!1,u.value=t.src)};function z(e){f.value=!1,d.value=!1,a("load",e)}function B(e){f.value=!1,d.value=!0,a("error",e)}const T=he(function(e){e&&(N(),D())},200,!0);function P(){return c(this,null,function*(){var e;if(!ce)return;yield ne();const{scrollContainer:l}=t;if(me(l))m.value=l;else if(ge(l)&&""!==l)m.value=null!=(e=document.querySelector(l))?e:void 0;else if(p.value){const e=ul(p.value);m.value=ye(e)?void 0:e}const{stop:a}=be(p,([e])=>{T(e.isIntersecting)},{root:m});y=a})}function D(){ce&&T&&(null==y||y(),m.value=void 0,y=void 0)}function F(){w.value&&(v.value=!0,a("show"))}function H(){v.value=!1,a("close")}function W(e){a("switch",e)}return I(()=>t.src,()=>{j.value?(f.value=!0,d.value=!1,D(),P()):N()}),E(()=>{j.value?P():N()}),l({showPreview:F}),(e,l)=>(O(),X("div",de({ref_key:"container",ref:p},V(o),{class:[V(n).b(),e.$attrs.class]}),[d.value?M(e.$slots,"error",{key:0},()=>[A("div",{class:R(V(n).e("error"))},Z(V(i)("el.image.error")),3)]):(O(),X(U,{key:1},[void 0!==u.value?(O(),X("img",de({key:0},V(r),{src:u.value,loading:e.loading,style:V(h),class:V(b),crossorigin:e.crossorigin,onClick:F,onLoad:z,onError:B}),null,16,["src","loading","crossorigin"])):Y("v-if",!0),f.value?(O(),X("div",{key:1,class:R(V(n).e("wrapper"))},[M(e.$slots,"placeholder",{},()=>[A("div",{class:R(V(n).e("placeholder"))},null,2)])],2)):Y("v-if",!0)],64)),V(w)?(O(),X(U,{key:2},[v.value?(O(),L(V(yl),{key:0,"z-index":e.zIndex,"initial-index":V(C),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,scale:e.scale,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:H,onSwitch:W},fe({toolbar:$(l=>[M(e.$slots,"toolbar",ve(pe(l)))]),default:$(()=>[e.$slots.viewer?(O(),X("div",{key:0},[M(e.$slots,"viewer")])):Y("v-if",!0)]),_:2},[e.$slots.progress?{name:"progress",fn:$(l=>[M(e.$slots,"progress",ve(pe(l)))])}:void 0,e.$slots["viewer-error"]?{name:"viewer-error",fn:$(l=>[M(e.$slots,"viewer-error",ve(pe(l)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Y("v-if",!0)],64)):Y("v-if",!0)],16))}})),[["__file","image.vue"]])),wl=f({animated:Boolean,count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:v([Number,Object])}}),_l=f({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Cl=g({name:"ElSkeletonItem"});var Sl=m(g(r(o({},Cl),{props:_l,setup(e){const l=x("skeleton");return(e,a)=>(O(),X("div",{class:R([V(l).e("item"),V(l).e(e.variant)])},["image"===e.variant?(O(),L(V(ke),{key:0})):Y("v-if",!0)],2))}})),[["__file","skeleton-item.vue"]]);const jl=g({name:"ElSkeleton"});const Nl=se(m(g(r(o({},jl),{props:wl,setup(e,{expose:l}){const a=e,t=x("skeleton"),i=((e,l=0)=>{if(0===l)return e;const a=xe(l)&&Boolean(l.initVal),t=_(a);let i=null;const n=l=>{we(l)?t.value=e.value:(i&&clearTimeout(i),i=setTimeout(()=>{t.value=e.value},l))},s=e=>{"leading"===e?d(l)?n(l):n(l.leading):xe(l)?n(l.trailing):t.value=!1};return E(()=>s("leading")),I(()=>e.value,e=>{s(e?"leading":"trailing")}),t})(_e(a,"loading"),a.throttle);return l({uiLoading:i}),(e,l)=>V(i)?(O(),X("div",de({key:0,class:[V(t).b(),V(t).is("animated",e.animated)]},e.$attrs),[(O(!0),X(U,null,Ce(e.count,l=>(O(),X(U,{key:l},[V(i)?M(e.$slots,"template",{key:l},()=>[B(Sl,{class:R(V(t).is("first")),variant:"p"},null,8,["class"]),(O(!0),X(U,null,Ce(e.rows,l=>(O(),L(Sl,{key:l,class:R([V(t).e("paragraph"),V(t).is("last",l===e.rows&&e.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Y("v-if",!0)],64))),128))],16)):M(e.$slots,"default",ve(de({key:1},e.$attrs)))}})),[["__file","skeleton.vue"]]),{SkeletonItem:Sl}),Il=Se(Sl),El={label:"label",value:"value",disabled:"disabled"},zl=f(o({direction:{type:v(String),default:"horizontal"},options:{type:v(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:v(Object),default:()=>El},block:Boolean,size:Ne,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String},Je(["ariaLabel"]))),Ll={[ll]:e=>ge(e)||d(e)||je(e),[el]:e=>ge(e)||d(e)||je(e)},Ol=g({name:"ElSegmented"});const $l=se(m(g(r(o({},Ol),{props:zl,emits:Ll,setup(e,{emit:l}){const a=e,t=x("segmented"),i=al(),n=tl(),s=il(),{formItem:r}=nl(),{inputId:c,isLabeledByFormItem:u}=sl(a,{formItemContext:r}),d=_(null),f=Ie(),v=Ee({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),p=S(()=>o(o({},El),a.props)),m=e=>xe(e)?e[p.value.value]:e,g=e=>xe(e)?e[p.value.label]:e,y=e=>!!(s.value||xe(e)&&e[p.value.disabled]),b=e=>a.modelValue===m(e),h=e=>[t.e("item"),t.is("selected",b(e)),t.is("disabled",y(e))],k=()=>{if(!d.value)return;const e=d.value.querySelector(".is-selected"),l=d.value.querySelector(".is-selected input");if(!e||!l)return v.width=0,v.height=0,v.translateX=0,v.translateY=0,void(v.focusVisible=!1);v.isInit=!0,"vertical"===a.direction?(v.height=e.offsetHeight,v.translateY=e.offsetTop):(v.width=e.offsetWidth,v.translateX=e.offsetLeft);try{v.focusVisible=l.matches(":focus-visible")}catch(t){}},w=S(()=>[t.b(),t.m(n.value),t.is("block",a.block)]),C=S(()=>({width:"vertical"===a.direction?"100%":`${v.width}px`,height:"vertical"===a.direction?`${v.height}px`:"100%",transform:"vertical"===a.direction?`translateY(${v.translateY}px)`:`translateX(${v.translateX}px)`,display:v.isInit?"block":"none"})),j=S(()=>{return[t.e("item-selected"),t.is("disabled",y((e=a.modelValue,a.options.find(l=>m(l)===e)))),t.is("focus-visible",v.focusVisible)];var e}),N=S(()=>a.name||i.value);return ze(d,k),I(f,k),I(()=>a.modelValue,()=>{var e;k(),a.validateEvent&&(null==(e=null==r?void 0:r.validate)||e.call(r,"change").catch(e=>Qe()))},{flush:"post"}),(e,i)=>e.options.length?(O(),X("div",{key:0,id:V(c),ref_key:"segmentedRef",ref:d,class:R(V(w)),role:"radiogroup","aria-label":V(u)?void 0:e.ariaLabel||"segmented","aria-labelledby":V(u)?V(r).labelId:void 0},[A("div",{class:R([V(t).e("group"),V(t).m(a.direction)])},[A("div",{style:P(V(C)),class:R(V(j))},null,6),(O(!0),X(U,null,Ce(e.options,(a,i)=>(O(),X("label",{key:i,class:R(h(a))},[A("input",{class:R(V(t).e("item-input")),type:"radio",name:V(N),disabled:y(a),checked:b(a),onChange:e=>(e=>{const a=m(e);l(ll,a),l(el,a)})(a)},null,42,["name","disabled","checked","onChange"]),A("div",{class:R(V(t).e("item-label"))},[M(e.$slots,"default",{item:a},()=>[G(Z(g(a)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):Y("v-if",!0)}})),[["__file","segmented.vue"]]));const Bl=[{name:"local-image-upload",label:"图片上传",icon:"ri-image-add-line",upload:(e,l)=>c(null,null,function*(){var a;yield Ge(e),null==(a=null==l?void 0:l.handleGetResourceList)||a.call(l)}),uploadConfig:{accept:"image/*",limit:1},order:0},{name:"local-file-upload",label:"文件上传",icon:"ri-file-upload-line",upload:(e,l)=>c(null,null,function*(){var a;yield Ge(e),null==(a=null==l?void 0:l.handleGetResourceList)||a.call(l)}),uploadConfig:{accept:".doc,.xls,.ppt,.txt,.pdf",limit:1},order:1}],Tl=$e("resourceStore",()=>{const e=_([]),l=l=>e.value.find(e=>e.name===l),a=a=>!l(a.name)&&(e.value.push(a),!0);return Bl.forEach(e=>a(e)),{addButton:a,removeButton:l=>{e.value=e.value.filter(e=>e.name!==l)},getButton:l,getAllButton:()=>e.value}}),Al={class:"resource-panel h-full flex flex-col"},Pl={class:"flex flex-col justify-between gap-y-1 md:flex-row"},Rl={class:"flex items-center justify-center"},Vl={class:"flex justify-end"},Yl={class:"mt-2 min-h-0 flex-1"},Xl={class:"flex flex-wrap px-[2px] pt-[2px]"},Ml=["onClick","onDblclick","onContextmenu"],Dl={class:"resource-item__cover"},Fl={class:"relative m-[8px] h-[calc(100%-16px)] w-[calc(100%-16px)] flex items-center justify-center overflow-hidden"},Hl={class:"cursor-default overflow-hidden text-ellipsis whitespace-pre-wrap"},Ul={key:1,class:"relative m-[8px] h-[calc(100%-16px)] w-[calc(100%-16px)] flex items-center justify-center overflow-hidden"},Wl={class:"cursor-default overflow-hidden text-ellipsis whitespace-pre-wrap"},ql={key:0,class:"resource-item__name cursor-default"},Gl={class:"resource-item__selected"},Zl={key:1,class:"h-full w-full flex flex-1 items-center justify-center"},Kl={class:"resource-panel__footer flex justify-between pt-2"},Jl={class:"flex items-center"},Ql={key:0},ea={class:"resource-dock"},la={class:"res-app"},aa=["name","onChange"],ta={class:"res-app-icon"},ia="url",na=fl(g(r(o({},{name:"ArtSourcePanel"}),{__name:"panel",props:Be({multiple:{type:Boolean,default:!1},limit:{default:void 0},pageSize:{default:30},showAction:{type:Boolean,default:!0},dbClickConfirm:{type:Boolean,default:!1},defaultFileType:{},fileTypes:{}},{modelValue:{},modelModifiers:{}}),emits:Be(["cancel","confirm"],["update:modelValue"]),setup(e,{emit:l}){var a;const t=e,i=l,n=Te(e,"modelValue"),s=Tl(),u=_(),d=_({active:null!=(a=t.defaultFileType)?a:"",options:[{label:()=>"所有",value:"",icon:"ri:gallery-view-2",suffix:""},{label:()=>"图片",value:"image",icon:"ri:image-line",suffix:"png,jpg,jpeg,gif,bmp,webp"},{label:()=>"视频",value:"video",icon:"ri:folder-video-line",suffix:"mp4,avi,wmv,mov,flv,mkv,webm"},{label:()=>"音频",value:"audio",icon:"ri:file-music-line",suffix:"mp3,wav,ogg,wma,aac,flac,ape,wavpack"},{label:()=>"文档",value:"document",icon:"ri:file-text-line",suffix:"doc,docx,xls,xlsx,ppt,pptx,pdf"}]}),f=_({page:1,pageSize:t.pageSize,total:0,originName:"",suffix:""}),v=_([]),p=_([]),m=_([]),g=_(!1),y=_({resource:{},items:S(()=>{return[k(y.value.resource)?{key:"deselect",label:"取消选中",icon:"ri-close-fill"}:{key:"select",label:"选中",icon:"ri-check-fill"},{key:"singleSelect",label:"独立此项",icon:"ri-checkbox-circle-line",showLine:!0},{key:"view",label:"查看",icon:"ri-eye-line",disabled:(e=y.value.resource,!(null==(l=null==e?void 0:e.mimeType)?void 0:l.startsWith("image")))},{key:"delete",label:"删除",icon:"ri-delete-bin-2-line"}];var e,l}),handleSelect(e){var l;const{resource:a}=y.value;"select"===e.key&&x(a),"deselect"===e.key&&w(a),"singleSelect"===e.key&&(C(),x(a)),"view"===e.key&&function(e,l){const a=document.createElement("div"),t=r(o({urlList:e,hideOnClickModal:!0,zIndex:2500,initialIndex:0},l),{onClose:()=>{Oe(null,a),document.body.contains(a)&&document.body.removeChild(a)}}),i=Le(yl,t);document.body.appendChild(a),Oe(i,a)}([null!=(l=null==a?void 0:a.url)?l:""]),"delete"===e.key&&(null==a?void 0:a.id)&&function(e){c(this,null,function*(){qe.confirm("确定要删除这条数据吗？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>c(null,null,function*(){const l={id:e};try{g.value=!0,yield Re(l),yield P()}finally{g.value=!1}}))})}(a.id)}});I(()=>n.value,e=>{p.value=Array.isArray(e)?e:e?[e]:[]},{deep:!0}),I(()=>p.value,e=>{const l=t.multiple?e:e[0];n.value&&n.value!==l&&(n.value=l)},{deep:!0});const b=S(()=>g.value?f.value.pageSize:30);function h(e){var l;if(null==(l=null==e?void 0:e.mimeType)?void 0:l.startsWith("image"))return e.url}function k(e){const l=e[ia];return p.value.includes(l)}function x(e){const l=e[ia];t.multiple?(t.limit&&(p.value.length,t.limit),p.value.push(l),m.value.find(e=>e[ia]===l)||m.value.push(e)):(m.value=[e],p.value=[l])}function w(e){const l=e[ia];p.value=p.value.filter(e=>e!==l),m.value=m.value.filter(e=>e[ia]!==l)}function C(){p.value=[],m.value=[]}function j(){i("cancel")}function N(){i("confirm",m.value)}function z(e,l){let a=e.target;for(;a.tagName!==l.toUpperCase();)a=null==a?void 0:a.parentNode;return a}const T=e=>{var l;const{options:a}=d.value;f.value.suffix=null==(l=a.find(l=>l.value===e))?void 0:l.suffix,P()},P=()=>c(null,null,function*(){try{g.value=!0,v.value=[];const{suffix:e,originName:l,page:a,pageSize:t}=f.value,{from:i,to:n}=He({current:a,size:t}),s={originName:l,suffix:e,from:i,to:n},{data:o}=yield Pe(s);v.value=null!=o?o:[]}finally{g.value=!1}});return E(()=>c(null,null,function*(){var e,l;yield P();const a=document.getElementsByClassName("res-app");for(let t=0;t<a.length;t++){const i=a[t];i.addEventListener("click",e=>{var l,a,t;e.stopPropagation();const i=z(e,"div").children[0],n=null==(l=s.getAllButton())?void 0:l.find(e=>e.name===i.getAttribute("name"));(null==n?void 0:n.click)&&(null==(a=null==n?void 0:n.click)||a.call(n,n,m)),(null==n?void 0:n.upload)&&(null==(t=null==i?void 0:i.click)||t.call(i))}),null==(e=null==i?void 0:i.parentElement)||e.addEventListener("mouseover",()=>{const e=t;i.className="res-app main-effect",0===e?(a[1]&&(a[1].className="res-app second-effect"),a[2]&&(a[2].className="res-app third-effect")):e===a.length-1?(a[e-1]&&(a[e-1].className="res-app second-effect"),a[e-2]&&(a[e-2].className="res-app third-effect")):(a[e-1]&&(a[e-1].className="res-app second-effect"),a[e+1]&&(a[e+1].className="res-app second-effect"),e-2>-1&&a[e-2]&&(a[e-2].className="res-app third-effect"),e+2<a.length&&a[e+2]&&(a[e+2].className="res-app third-effect"))}),null==(l=null==i?void 0:i.parentElement)||l.addEventListener("mouseout",()=>{for(const e of a)e.className="res-app"})}})),Ae(()=>{document.querySelectorAll(".ma-resource-dock .res-app").forEach(e=>{e.removeEventListener("mousemove",()=>{}),e.removeEventListener("mouseout",()=>{}),e.removeEventListener("click",()=>{})})}),(e,l)=>{const a=Ue,i=$l,n=rl,o=xl,r=Il,c=Nl,m=Fe,_=cl,S=Ye,I=De,E=Xe,z=Ve,F=dl;return O(),X("div",Al,[A("div",Pl,[A("div",null,[B(i,{modelValue:V(d).active,"onUpdate:modelValue":l[0]||(l[0]=e=>V(d).active=e),options:V(d).options,size:"default",block:"",onChange:T},{default:$(({item:e})=>[A("div",Rl,[B(a,{icon:e.icon,class:"mr-1 flex items-center justify-center text-[17px]"},null,8,["icon"]),A("span",null,Z("function"==typeof e.label?e.label():e.label),1)])]),_:1},8,["modelValue","options"])]),A("div",Vl,[B(n,{modelValue:V(f).originName,"onUpdate:modelValue":l[1]||(l[1]=e=>V(f).originName=e),placeholder:"搜索此分类下的资源",clearable:"",class:"w-full md:w-[180px]",onInput:P},{suffix:$(()=>[B(a,{icon:"ri-search-line"})]),_:1},8,["modelValue"])])]),A("div",Yl,[V(g)||V(v).length?(O(),L(_,{key:0},{default:$(()=>[A("div",Xl,[B(m,{fill:"",wrap:"","fill-ratio":9},{default:$(()=>[(O(!0),X(U,null,Ce(V(v),e=>(O(),X("div",{key:e.id,class:R(["resource-item",{active:k(e)}]),onClick:l=>function(e){k(e)?w(e):x(e)}(e),onDblclick:l=>function(e){C(),x(e),N()}(e),onContextmenu:D(l=>function(e,l){e.preventDefault(),e.stopPropagation(),y.value.resource=l,ne(()=>{var l;null==(l=u.value)||l.show(e)})}(l,e),["prevent"])},[A("div",Dl,[h(e)?(O(),L(o,{key:0,src:h(e),fit:"cover",class:"h-full w-full",lazy:""},{error:$(()=>[A("div",Fl,[A("div",Hl,Z(e.originName),1)])]),_:2},1032,["src"])):(O(),X("div",Ul,[A("div",Wl,Z(e.originName),1)]))]),h(e)?(O(),X("div",ql,Z(e.originName),1)):Y("",!0),A("div",Gl,[B(a,{icon:"ri-checkbox-circle-fill",class:"resource-item__selected-icon"})])],42,Ml))),128)),0===V(v).length?(O(!0),X(U,{key:0},Ce(V(b),e=>(O(),L(c,{key:e,class:"resource-skeleton relative",animated:""},{template:$(()=>[B(r,{class:"absolute !h-full w-full",variant:"rect"})]),_:1}))),128)):Y("",!0),(O(),X(U,null,Ce(10,e=>A("div",{key:e,class:"resource-placeholder"})),64))]),_:1})])]),_:1})):(O(),X("div",Zl,[B(S)])),B(We,{ref_key:"menuRef",ref:u,"menu-items":V(y).items,"menu-width":180,"submenu-width":140,"border-radius":10,onSelect:V(y).handleSelect},null,8,["menu-items","onSelect"])]),A("div",Kl,[A("div",Jl,[t.multiple&&t.limit?(O(),L(I,{key:0,size:"large",class:R(["mr-2",{"color-[var(--el-color-danger)]":t.limit&&V(p).length>=t.limit}])},{default:$(()=>[G(Z(V(p).length)+" ",1),t.multiple&&t.limit?(O(),X(U,{key:0},[G(" /"+Z(t.limit),1)],64)):Y("",!0)]),_:1},8,["class"])):Y("",!0),B(E,{"current-page":V(f).page,"onUpdate:currentPage":l[2]||(l[2]=e=>V(f).page=e),disabled:V(g),total:V(f).total,"page-size":V(f).pageSize,background:"",layout:"prev, pager, next","pager-count":5,onChange:P},null,8,["current-page","disabled","total","page-size"])]),t.showAction?(O(),X("div",Ql,[M(e.$slots,"actions",{},()=>[B(z,{onClick:j},{default:$(()=>[...l[3]||(l[3]=[G(" 取消 ",-1)])]),_:1}),B(z,{type:"primary",onClick:N},{default:$(()=>[...l[4]||(l[4]=[G(" 确认 ",-1)])]),_:1})],!0)])):Y("",!0)]),A("div",ea,[(O(!0),X(U,null,Ce(V(s).getAllButton(),e=>(O(),X("div",{key:e.name,class:"res-app-container"},[A("div",la,[B(F,{content:e.label,placement:"top","show-after":300,offset:10,"show-arrow":!1},{default:$(()=>{var l;return[A("div",null,[A("input",de({type:"file",name:e.name,class:"hidden"},{ref_for:!0},null!=(l=null==e?void 0:e.uploadConfig)?l:{},{onChange:l=>function(e,l){var a;try{g.value=!0;const t=e.target;if(!(t instanceof HTMLInputElement))return;const i=t.files;if(!i||0===i.length)return;null==(a=l.upload)||a.call(l,1===i.length?i[0]:Array.from(i),{btn:l,handleGetResourceList:P}),t.value=""}finally{g.value=!1}}(l,e),onClick:D(()=>{},["stop"])}),null,16,aa),A("i",ta,[B(a,{icon:e.icon},null,8,["icon"])])])]}),_:2},1032,["content"])])]))),128))])])}}})),[["__scopeId","data-v-04311758"]]);export{xl as E,na as R};
