var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,i=(e,t)=>{for(var s in t||(t={}))l.call(t,s)&&o(e,s,t[s]);if(a)for(var s of a(t))r.call(t,s)&&o(e,s,t[s]);return e},n=(e,a)=>t(e,s(a));import{d as u,r as d,t as c,a as p,o as g,n as v,b as h,c as m,e as f,f as x,g as y,u as b,h as w,i as _,j as k,k as j,l as T,m as M,p as B,q as $,s as P,v as O,w as E,x as F,A as L,y as V,z as I,B as C,C as z,D as X,E as D,F as R,G as S,H as q,I as U,J as A,K as H}from"./index-CSMnfbno.js";import{E as K,a as G}from"./el-form-item-BLLKL5R4.js";import{E as J}from"./el-button-D6QoVWRW.js";/* empty css                    */import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-iXCyht8V.js";import{_ as Y}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                 */import{_ as N,a as Q}from"./LoginLeftView-klIOEiQ2.js";import{E as Z}from"./index-C8WLZA2V.js";import{E as ee}from"./index-CewyASu6.js";import"./index-Cb-YqCnn.js";import"./index-BdYr8bnS.js";import"./_initCloneObject-D_J0kv5r.js";import"./el-dropdown-item-CnpNiUFX.js";import"./index-DuKNL8KD.js";import"./index-BQLgPbRy.js";import"./index-CPbiEs8c.js";import"./refs-Cw5r5QN8.js";/* empty css                  *//* empty css                     */import"./index.vue_vue_type_script_setup_true_lang-O0JQIAdu.js";import"./index-FAQtgOCg.js";import"./event-BwRzfsZt.js";const te=Y(u(n(i({},{name:"ArtDragVerify"}),{__name:"index",props:{value:{type:Boolean,default:!1},width:{default:"100%"},height:{default:40},text:{default:"按住滑块拖动"},successText:{default:"success"},background:{default:"#eee"},progressBarBg:{default:"#1385FF"},completedBg:{default:"#57D187"},circle:{type:Boolean,default:!1},radius:{default:"calc(var(--custom-radius) / 3 + 2px)"},handlerIcon:{default:"solar:double-alt-arrow-right-linear"},successIcon:{default:"ri:check-fill"},handlerBg:{default:"#fff"},textSize:{default:"13px"},textColor:{default:"#333"}},emits:["handlerMove","update:value","passCallback"],setup(e,{expose:t,emit:s}){const a=s,l=e,r=d({isMoving:!1,x:0,isOk:!1}),{isOk:o}=c(r),i=p(),n=p(),u=p(),$=p();let P,O,E,F;const L=e=>{P=e.targetTouches[0].pageX,O=e.targetTouches[0].pageY},V=e=>{E=e.targetTouches[0].pageX,F=e.targetTouches[0].pageY,Math.abs(E-P)>Math.abs(F-O)&&e.preventDefault()};document.addEventListener("touchstart",L),document.addEventListener("touchmove",V,{passive:!1});const I=()=>{var e;return"string"==typeof l.width?(null==(e=i.value)?void 0:e.offsetWidth)||260:l.width};g(()=>{var e;null==(e=i.value)||e.style.setProperty("--textColor",l.textColor),v(()=>{var e,t;const s=I();null==(e=i.value)||e.style.setProperty("--width",Math.floor(s/2)+"px"),null==(t=i.value)||t.style.setProperty("--pwidth",-Math.floor(s/2)+"px")}),document.addEventListener("touchstart",L),document.addEventListener("touchmove",V,{passive:!1})}),h(()=>{document.removeEventListener("touchstart",L),document.removeEventListener("touchmove",V)});const C={left:"0",width:l.height+"px",height:l.height+"px",background:l.handlerBg},z=m(()=>({width:"string"==typeof l.width?l.width:l.width+"px",height:l.height+"px",lineHeight:l.height+"px",background:l.background,borderRadius:l.circle?l.height/2+"px":l.radius})),X={background:l.progressBarBg,height:l.height+"px",borderRadius:l.circle?l.height/2+"px 0 0 "+l.height/2+"px":l.radius},D=m(()=>({fontSize:l.textSize})),R=m(()=>l.value?l.successText:l.text),S=e=>{l.value||(r.isMoving=!0,u.value.style.transition="none",r.x=(e.pageX||e.touches[0].pageX)-parseInt(u.value.style.left.replace("px",""),10)),a("handlerMove")},q=e=>{if(r.isMoving&&!l.value){const t=I();let s=(e.pageX||e.touches[0].pageX)-r.x;s>0&&s<=t-l.height?(u.value.style.left=s+"px",$.value.style.width=s+l.height/2+"px"):s>t-l.height&&(u.value.style.left=t-l.height+"px",$.value.style.width=t-l.height/2+"px",A())}},U=e=>{if(r.isMoving&&!l.value){const t=I();(e.pageX||e.changedTouches[0].pageX)-r.x<t-l.height?(r.isOk=!0,u.value.style.left="0",u.value.style.transition="all 0.2s",$.value.style.width="0",r.isOk=!1):(u.value.style.transition="none",u.value.style.left=t-l.height+"px",$.value.style.width=t-l.height/2+"px",A()),r.isMoving=!1}},A=()=>{a("update:value",!0),r.isMoving=!1,$.value.style.background=l.completedBg,n.value.style["-webkit-text-fill-color"]="unset",n.value.style.animation="slidetounlock2 2s cubic-bezier(0, 0.2, 1, 1) infinite",n.value.style.color="#fff",a("passCallback")};return t({reset:()=>{u.value.style.left="0",$.value.style.width="0",$.value.style.background=l.progressBarBg,n.value.style["-webkit-text-fill-color"]="transparent",n.value.style.animation="slidetounlock 2s cubic-bezier(0, 0.2, 1, 1) infinite",n.value.style.color=l.background,a("update:value",!1),r.isOk=!1,r.isMoving=!1,r.x=0}}),(t,s)=>{const a=W;return x(),f("div",{ref_key:"dragVerify",ref:i,class:"drag_verify",style:y(b(z)),onMousemove:q,onMouseup:U,onMouseleave:U,onTouchmove:q,onTouchend:U},[w("div",{class:_(["dv_progress_bar",{goFirst2:b(o)}]),ref_key:"progressBar",ref:$,style:X},null,2),w("div",{class:"dv_text",style:y(b(D)),ref_key:"messageRef",ref:n},[t.$slots.textBefore?k(t.$slots,"textBefore",{key:0},void 0,!0):j("",!0),T(" "+M(b(R))+" ",1),t.$slots.textAfter?k(t.$slots,"textAfter",{key:1},void 0,!0):j("",!0)],4),w("div",{class:_(["dv_handler dv_handler_bg",{goFirst:b(o)}]),onMousedown:S,onTouchstart:S,ref_key:"handler",ref:u,style:C},[B(a,{icon:e.value?e.successIcon:e.handlerIcon,class:"text-g-600"},null,8,["icon"])],34)],36)}}})),[["__scopeId","data-v-265b66f3"]]),se={class:"flex w-full h-screen"},ae={class:"relative flex-1"},le={class:"auth-right-wrap"},re={class:"form"},oe={class:"title"},ie={class:"sub-title"},ne={class:"relative pb-5 mt-6"},ue={class:"flex-cb mt-2 text-sm"},de={style:{"margin-top":"30px"}},ce={class:"mt-5 text-sm text-gray-600"},pe=Y(u(n(i({},{name:"Login"}),{__name:"index",setup(e){const t=$(),{isDark:s}=P(t),{t:a,locale:l}=O(),r=p(0);E(l,()=>{r.value++});const o=p(),i=F(),n=z(),u=X(),c=p(!1),v=p(!1),h=L.systemInfo.name,y=p(),k=d({account:"",username:"",email:"624944977@qq.com",password:"wang3763237",rememberPassword:!0}),j=m(()=>({username:[{required:!0,message:a("login.placeholder.username"),trigger:"blur"}],password:[{required:!0,message:a("login.placeholder.password"),trigger:"blur"}]})),A=p(!1);g(()=>{});const W=()=>{return e=null,t=null,s=function*(){if(y.value)try{if(!(yield y.value.validate()))return;if(!c.value)return void(v.value=!0);A.value=!0;const{email:e,password:t}=k,s={email:e,password:t},{data:a}=yield U(s),{refreshToken:l,accessToken:r}=a.session;if(!r)throw new Error("Login failed - no token received");i.setToken(r,l),i.setLoginStatus(!0),yield i.fetchUserInfo(),yield i.fetchDictList(),pe();const o=u.query.redirect;yield n.push(o||"/")}catch(e){}finally{A.value=!1,Y()}},new Promise((a,l)=>{var r=e=>{try{i(s.next(e))}catch(t){l(t)}},o=e=>{try{i(s.throw(e))}catch(t){l(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,o);i((s=s.apply(e,t)).next())});var e,t,s},Y=()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.reset)||t.call(e)},pe=()=>{setTimeout(()=>{H({title:a("login.success.title"),type:"success",duration:2500,zIndex:1e4,message:`${a("login.success.message")}, ${h}!`})},1e3)};return(e,t)=>{const a=N,l=Q,i=Z,n=G,u=te,d=ee,p=D("RouterLink"),g=J,h=K,m=R("ripple");return x(),f("div",se,[B(a),w("div",ae,[B(l),w("div",le,[w("div",re,[w("h3",oe,M(e.$t("login.title")),1),w("p",ie,M(e.$t("login.subTitle")),1),(x(),V(h,{ref_key:"formRef",ref:y,model:b(k),rules:b(j),key:b(r),onKeyup:C(W,["enter"]),class:"mt-[25px]"},{default:I(()=>[B(n,{prop:"email"},{default:I(()=>[B(i,{class:"custom-height",placeholder:e.$t("login.placeholder.email"),modelValue:b(k).email,"onUpdate:modelValue":t[0]||(t[0]=e=>b(k).email=e),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"])]),_:1}),B(n,{prop:"password"},{default:I(()=>[B(i,{class:"custom-height",placeholder:e.$t("login.placeholder.password"),modelValue:b(k).password,"onUpdate:modelValue":t[1]||(t[1]=e=>b(k).password=e),modelModifiers:{trim:!0},type:"password",autocomplete:"off","show-password":""},null,8,["placeholder","modelValue"])]),_:1}),w("div",ne,[w("div",{class:_(["relative z-[2] overflow-hidden select-none rounded-lg border border-transparent tad-300",{"!border-[#FF4E4F]":!b(c)&&b(v)}])},[B(u,{ref_key:"dragVerify",ref:o,value:b(c),"onUpdate:value":t[2]||(t[2]=e=>S(c)?c.value=e:null),text:e.$t("login.sliderText"),textColor:"var(--art-gray-700)",successText:e.$t("login.sliderSuccessText"),progressBarBg:"var(--main-color)",background:b(s)?"#26272F":"#F1F1F4",handlerBg:"var(--default-box-color)"},null,8,["value","text","successText","background"])],2),w("p",{class:_(["absolute top-0 z-[1] px-px mt-2 text-xs text-[#f56c6c] tad-300",{"translate-y-10":!b(c)&&b(v)}])},M(e.$t("login.placeholder.slider")),3)]),w("div",ue,[B(d,{modelValue:b(k).rememberPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>b(k).rememberPassword=e)},{default:I(()=>[T(M(e.$t("login.rememberPwd")),1)]),_:1},8,["modelValue"]),B(p,{class:"text-theme",to:{name:"ForgetPassword"}},{default:I(()=>[T(M(e.$t("login.forgetPwd")),1)]),_:1})]),w("div",de,[q((x(),V(g,{class:"w-full custom-height",type:"primary",onClick:W,loading:b(A)},{default:I(()=>[T(M(e.$t("login.btnText")),1)]),_:1},8,["loading"])),[[m]])]),w("div",ce,[w("span",null,M(e.$t("login.noAccount")),1),B(p,{class:"text-theme",to:{name:"Register"}},{default:I(()=>[T(M(e.$t("login.register")),1)]),_:1})])]),_:1},8,["model","rules"]))])])])])}}})),[["__scopeId","data-v-391fb588"]]);export{pe as default};
