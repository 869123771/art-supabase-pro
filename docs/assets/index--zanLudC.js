var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,u=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&u(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&u(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{b2 as o,bd as d,al as c,a9 as m,bb as p,ab as v,_ as b,d as f,bw as y,W as N,l as g,w as x,o as E,b3 as V,b as h,c as I,H as S,u as w,B as _,g as A,r as k,k as O,z as F,y as j,ac as M,dS as $,a5 as B,h as L,cE as P,dT as T,bv as D,aE as C,m as R,p as z,a4 as G,ae as K,U,dU as X,V as H,ao as W}from"./index-DHdgQId_.js";import{E as q}from"./index-ci4gPeH2.js";import{u as J,d as Q,t as Y}from"./index-CJHBY14B.js";import{U as Z,I as ee,C as ae}from"./event-BwRzfsZt.js";import{d as te,u as le,e as ne}from"./index-Bc4hPq7U.js";const re=100,ue=600,ie="_RepeatClick",se={beforeMount(e,a){const t=a.value,{interval:l=re,delay:n=ue}=o(t)?{}:t;let r,u;const i=()=>o(t)?t():t.handler(),s=()=>{u&&(clearTimeout(u),u=void 0),r&&(clearInterval(r),r=void 0)},d=e=>{0===e.button&&(s(),i(),document.addEventListener("mouseup",s,{once:!0}),u=setTimeout(()=>{r=setInterval(()=>{i()},l)},n))};e[ie]={start:d,clear:s},e.addEventListener("mousedown",d)},unmounted(e){if(!e[ie])return;const{start:a,clear:t}=e[ie];a&&e.removeEventListener("mousedown",a),t&&(t(),document.removeEventListener("mouseup",t)),e[ie]=null}},oe=m(s(i({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:{type:Boolean,default:void 0},size:p,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:v([String,Number,null]),validator:e=>null===e||d(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}},J(["ariaLabel"])),{inputmode:{type:v(String),default:void 0},align:{type:v(String),default:"center"},disabledScientific:Boolean})),de={[ae]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[ee]:e=>d(e)||c(e),[Z]:e=>d(e)||c(e)},ce=["aria-label"],me=["aria-label"];const pe=W(b(f(s(i({},{name:"ElInputNumber"}),{__name:"input-number",props:oe,emits:de,setup(e,{expose:a,emit:t}){const l=e,n=t,{t:r}=y(),u=N("input-number"),i=R(),s=g({currentValue:l.modelValue,userInput:null}),{formItem:o}=te(),m=z(()=>d(l.modelValue)&&l.modelValue<=l.min),p=z(()=>d(l.modelValue)&&l.modelValue>=l.max),v=z(()=>{const e=ue(l.step);return K(l.precision)?Math.max(ue(l.modelValue),e):(l.precision,l.precision)}),b=z(()=>l.controls&&"right"===l.controlsPosition),f=le(),W=ne(),J=z(()=>{if(null!==s.userInput)return s.userInput;let e=s.currentValue;if(c(e))return"";if(d(e)){if(Number.isNaN(e))return"";K(l.precision)||(e=e.toFixed(l.precision))}return e}),re=(e,a)=>{if(K(a)&&(a=v.value),0===a)return Math.round(e);let t=String(e);const l=t.indexOf(".");if(-1===l)return e;if(!t.replace(".","").split("")[l+a])return e;const n=t.length;return"5"===t.charAt(n-1)&&(t=`${t.slice(0,Math.max(0,n-1))}6`),Number.parseFloat(Number(t).toFixed(a))},ue=e=>{if(c(e))return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l},ie=(e,a=1)=>d(e)?e>=Number.MAX_SAFE_INTEGER&&1===a||e<=Number.MIN_SAFE_INTEGER&&-1===a?e:re(e+l.step*a):s.currentValue,oe=e=>{const a=U(e),t=X(e);if(l.disabledScientific&&["e","E"].includes(t))e.preventDefault();else switch(a){case H.up:e.preventDefault(),de();break;case H.down:e.preventDefault(),pe()}},de=()=>{if(l.readonly||W.value||p.value)return;const e=Number(J.value)||0,a=ie(e);be(a),n(ee,s.currentValue),xe()},pe=()=>{if(l.readonly||W.value||m.value)return;const e=Number(J.value)||0,a=ie(e,-1);be(a),n(ee,s.currentValue),xe()},ve=(e,a)=>{const{max:t,min:r,step:u,precision:i,stepStrictly:s,valueOnClear:o}=l;t<r&&Y("InputNumber","min should not be greater than max.");let d=Number(e);if(c(e)||Number.isNaN(d))return null;if(""===e){if(null===o)return null;d=G(o)?{min:r,max:t}[o]:o}return s&&(d=re(Math.round(re(d/u))*u,i),d!==e&&a&&n(Z,d)),K(i)||(d=re(d,i)),(d>t||d<r)&&(d=d>t?t:r,a&&n(Z,d)),d},be=(e,a=!0)=>{var t;const r=s.currentValue,u=ve(e);a?(s.userInput=null,r===u&&e||(n(Z,u),r!==u&&n(ae,u,r),l.validateEvent&&(null==(t=null==o?void 0:o.validate)||t.call(o,"change").catch(e=>Q())),s.currentValue=u)):n(Z,u)},fe=e=>{s.userInput=e;const a=""===e?null:Number(e);n(ee,a),be(a,!1)},ye=e=>{const a=""!==e?Number(e):"";(d(a)&&!Number.isNaN(a)||""===e)&&be(a),xe(),s.userInput=null},Ne=e=>{n("focus",e)},ge=e=>{var a,t;s.userInput=null,null===s.currentValue&&(null==(a=i.value)?void 0:a.input)&&(i.value.input.value=""),n("blur",e),l.validateEvent&&(null==(t=null==o?void 0:o.validate)||t.call(o,"blur").catch(e=>Q()))},xe=()=>{s.currentValue!==l.modelValue&&(s.currentValue=l.modelValue)},Ee=e=>{document.activeElement===e.target&&e.preventDefault()};return x(()=>l.modelValue,(e,a)=>{const t=ve(e,!0);null===s.userInput&&t!==a&&(s.currentValue=t)},{immediate:!0}),x(()=>l.precision,()=>{s.currentValue=ve(l.modelValue)}),E(()=>{var e;const{min:a,max:t,modelValue:r}=l,u=null==(e=i.value)?void 0:e.input;if(u.setAttribute("role","spinbutton"),Number.isFinite(t)?u.setAttribute("aria-valuemax",String(t)):u.removeAttribute("aria-valuemax"),Number.isFinite(a)?u.setAttribute("aria-valuemin",String(a)):u.removeAttribute("aria-valuemin"),u.setAttribute("aria-valuenow",s.currentValue||0===s.currentValue?String(s.currentValue):""),u.setAttribute("aria-disabled",String(W.value)),!d(r)&&null!=r){let e=Number(r);Number.isNaN(e)&&(e=null),n(Z,e)}u.addEventListener("wheel",Ee,{passive:!1})}),V(()=>{var e,a;const t=null==(e=i.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${null!=(a=s.currentValue)?a:""}`)}),a({focus:()=>{var e,a;null==(a=null==(e=i.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=i.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(h(),I("div",{class:A([w(u).b(),w(u).m(w(f)),w(u).is("disabled",w(W)),w(u).is("without-controls",!e.controls),w(u).is("controls-right",b.value),w(u).is(e.align,!!e.align)]),onDragstart:a[0]||(a[0]=C(()=>{},["prevent"]))},[e.controls?S((h(),I("span",{key:0,role:"button","aria-label":w(r)("el.inputNumber.decrease"),class:A([w(u).e("decrease"),w(u).is("disabled",m.value)]),onKeydown:_(pe,["enter"])},[k(e.$slots,"decrease-icon",{},()=>[O(w(B),null,{default:F(()=>[b.value?(h(),j(w(M),{key:0})):(h(),j(w($),{key:1}))]),_:1})])],42,ce)),[[w(se),pe]]):L("v-if",!0),e.controls?S((h(),I("span",{key:1,role:"button","aria-label":w(r)("el.inputNumber.increase"),class:A([w(u).e("increase"),w(u).is("disabled",p.value)]),onKeydown:_(de,["enter"])},[k(e.$slots,"increase-icon",{},()=>[O(w(B),null,{default:F(()=>[b.value?(h(),j(w(P),{key:0})):(h(),j(w(T),{key:1}))]),_:1})])],42,me)),[[w(se),de]]):L("v-if",!0),O(w(q),{id:e.id,ref_key:"input",ref:i,type:"number",step:e.step,"model-value":J.value,placeholder:e.placeholder,readonly:e.readonly,disabled:w(W),size:w(f),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:oe,onBlur:ge,onFocus:Ne,onInput:fe,onChange:ye},D({_:2},[e.$slots.prefix?{name:"prefix",fn:F(()=>[k(e.$slots,"prefix")]),key:"0"}:void 0,e.$slots.suffix?{name:"suffix",fn:F(()=>[k(e.$slots,"suffix")]),key:"1"}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],34))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{pe as E,se as v};
