var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,d=(l,a,r)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r,i=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&d(e,a,l[a]);if(r)for(var a of r(l))t.call(l,a)&&d(e,a,l[a]);return e};import{d as s,a as u,c as n,r as m,w as p,y as c,f,z as b,p as g,u as y,l as v,G as V,bn as j,bs as h,bt as x}from"./index-D2YTfifR.js";import{E as O}from"./el-dialog-CKnhTw94.js";import"./el-overlay-CYBWNh-f.js";import{E as _}from"./el-button-BGDwCa_e.js";import{E as w,a as C}from"./el-form-item-uKO_EHXC.js";/* empty css                  *//* empty css                 */import{E as N}from"./index-Djw89c9H.js";import{E as P}from"./index-D7yW8JdR.js";const E=s({__name:"role-edit-dialog",props:{modelValue:{type:Boolean,default:!1},dialogType:{default:"add"},roleData:{default:void 0}},emits:["update:modelValue","success"],setup(e,{emit:d}){const s=e,E=d,D=u(),U=u(!1),k=n({get:()=>s.modelValue,set:e=>E("update:modelValue",e)}),q=m({roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),T=m({roleName:"",roleCode:"",description:"",enabled:!0});p(()=>s.modelValue,e=>{e&&R()}),p(()=>s.roleData,e=>{e&&s.modelValue&&R()},{deep:!0});const R=()=>{var e;const{id:l,roleName:a,roleCode:r,description:o,enabled:t}=null!=(e=s.roleData)?e:{};Object.assign(T,{id:l,roleName:a,roleCode:r,description:o,enabled:t})},S=()=>{var e;k.value=!1,null==(e=D.value)||e.resetFields()},z=()=>{return e=null,d=null,u=function*(){var e,d;if(D.value)try{yield D.value.validate();try{U.value=!0;const u=j(T),{id:n}=u,m=((e,l)=>{var a={};for(var d in e)o.call(e,d)&&l.indexOf(d)<0&&(a[d]=e[d]);if(null!=e&&r)for(var d of r(e))l.indexOf(d)<0&&t.call(e,d)&&(a[d]=e[d]);return a})(u,["id"]),p=i({},m);"add"===s.dialogType?yield h(p):yield x((e=i({},p),d={id:n},l(e,a(d))))}finally{U.value=!1}E("success"),S()}catch(u){}},new Promise((l,a)=>{var r=e=>{try{t(u.next(e))}catch(l){a(l)}},o=e=>{try{t(u.throw(e))}catch(l){a(l)}},t=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,o);t((u=u.apply(e,d)).next())});var e,d,u};return(l,a)=>{const r=N,o=C,t=P,d=w,i=_,s=O;return f(),c(s,{modelValue:y(k),"onUpdate:modelValue":a[4]||(a[4]=e=>V(k)?k.value=e:null),title:"add"===e.dialogType?"新增角色":"编辑角色",width:"30%","align-center":"",onClose:S},{footer:b(()=>[g(i,{onClick:S},{default:b(()=>[...a[5]||(a[5]=[v("取消",-1)])]),_:1}),g(i,{type:"primary",onClick:z,loading:y(U)},{default:b(()=>[...a[6]||(a[6]=[v("提交",-1)])]),_:1},8,["loading"])]),default:b(()=>[g(d,{ref_key:"formRef",ref:D,model:y(T),rules:y(q),"label-width":"120px",class:"pr-6"},{default:b(()=>[g(o,{label:"角色名称",prop:"roleName"},{default:b(()=>[g(r,{modelValue:y(T).roleName,"onUpdate:modelValue":a[0]||(a[0]=e=>y(T).roleName=e),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),g(o,{label:"角色编码",prop:"roleCode"},{default:b(()=>[g(r,{modelValue:y(T).roleCode,"onUpdate:modelValue":a[1]||(a[1]=e=>y(T).roleCode=e),placeholder:"请输入角色编码"},null,8,["modelValue"])]),_:1}),g(o,{label:"描述",prop:"description"},{default:b(()=>[g(r,{modelValue:y(T).description,"onUpdate:modelValue":a[2]||(a[2]=e=>y(T).description=e),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1}),g(o,{label:"启用"},{default:b(()=>[g(t,{modelValue:y(T).enabled,"onUpdate:modelValue":a[3]||(a[3]=e=>y(T).enabled=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{E as _};
