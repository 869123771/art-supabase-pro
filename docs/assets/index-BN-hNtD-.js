var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,u=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&a(e,n,t[n]);if(o)for(var n of o(t))s.call(t,n)&&a(e,n,t[n]);return e},c=(e,o)=>t(e,n(o));import{o as d,b as i,a as l,b2 as f,U as p,V as v,_ as m,d as E,j as b,w as y,u as h,ah as w,n as L,a9 as T,a6 as g,a1 as A,aj as P,y as x,f as O,aC as S,ao as k}from"./index-D2YTfifR.js";const I=e=>"undefined"!=typeof Element&&e instanceof Element,N=e=>Array.from(e.querySelectorAll('a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])')).filter(e=>R(e)&&(e=>"fixed"!==getComputedStyle(e).position&&null!==e.offsetParent)(e)),R=e=>{if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||"true"===e.getAttribute("aria-disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return!("hidden"===e.type||"file"===e.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},j=function(e,t,...n){let o;o=t.includes("mouse")||t.includes("click")?"MouseEvents":t.includes("key")?"KeyboardEvent":"HTMLEvents";const r=document.createEvent(o);return r.initEvent(t,...n),e.dispatchEvent(r),e},F=e=>!e.getAttribute("aria-owns"),K=(e,t,n)=>{const{parentNode:o}=e;if(!o)return null;const r=o.querySelectorAll(n);return r[Array.prototype.indexOf.call(r,e)+t]||null},_=(e,t)=>{if(!e||!e.focus)return;let n=!1;!I(e)||R(e)||e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),n=!0),e.focus(t),I(e)&&n&&e.removeAttribute("tabindex")},C=e=>{e&&(_(e),!F(e)&&e.click())},q="focus-trap.focus-after-trapped",U="focus-trap.focus-after-released",B={cancelable:!0,bubbles:!1},D={cancelable:!0,bubbles:!1},M="focusAfterTrapped",H="focusAfterReleased",$=Symbol("elFocusTrap"),W=l(),V=l(0),X=l(0);let z=0;const G=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0||e===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},J=(e,t)=>{for(const n of e)if(!Q(n,t))return n},Q=(e,t)=>{if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},Y=(e,t)=>{if(e){const n=document.activeElement;_(e,{preventScroll:!0}),X.value=window.performance.now(),e!==n&&(e=>e instanceof HTMLInputElement&&"select"in e)(e)&&t&&e.select()}};function Z(e,t){const n=[...e],o=e.indexOf(t);return-1!==o&&n.splice(o,1),n}const ee=(()=>{let e=[];return{push:t=>{const n=e[0];n&&t!==n&&n.pause(),e=Z(e,t),e.unshift(t)},remove:t=>{var n,o;e=Z(e,t),null==(o=null==(n=e[0])?void 0:n.resume)||o.call(n)}}})(),te=()=>{W.value="pointer",V.value=window.performance.now()},ne=()=>{W.value="keyboard",V.value=window.performance.now()},oe=e=>new CustomEvent("focus-trap.focusout-prevented",c(u({},D),{detail:e}));let re=[];const se=e=>{p(e)===v.esc&&re.forEach(t=>t(e))};var ae=m(E({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[M,H,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=l();let o,r;const{focusReason:s}=(d(()=>{0===z&&(document.addEventListener("mousedown",te),document.addEventListener("touchstart",te),document.addEventListener("keydown",ne)),z++}),i(()=>{z--,z<=0&&(document.removeEventListener("mousedown",te),document.removeEventListener("touchstart",te),document.removeEventListener("keydown",ne))}),{focusReason:W,lastUserFocusTimestamp:V,lastAutomatedFocusTimestamp:X});var a;a=n=>{e.trapped&&!m.paused&&t("release-requested",n)},d(()=>{0===re.length&&document.addEventListener("keydown",se),f&&re.push(a)}),i(()=>{re=re.filter(e=>e!==a),0===re.length&&f&&document.removeEventListener("keydown",se)});const m={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},E=n=>{if(!e.loop&&!e.trapped)return;if(m.paused)return;const{altKey:o,ctrlKey:r,metaKey:a,currentTarget:u,shiftKey:c}=n,{loop:d}=e,i=p(n)===v.tab&&!o&&!r&&!a,l=document.activeElement;if(i&&l){const e=u,[o,r]=(e=>{const t=G(e);return[J(t,e),J(t.reverse(),e)]})(e);if(o&&r)if(c||l!==r){if(c&&[o,e].includes(l)){const e=oe({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&Y(r,!0))}}else{const e=oe({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&Y(o,!0))}else if(l===e){const e=oe({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||n.preventDefault()}}};g($,{focusTrapRef:n,onKeydown:E}),y(()=>e.focusTrapEl,e=>{e&&(n.value=e)},{immediate:!0}),y([n],([e],[t])=>{e&&(e.addEventListener("keydown",E),e.addEventListener("focusin",P),e.addEventListener("focusout",x)),t&&(t.removeEventListener("keydown",E),t.removeEventListener("focusin",P),t.removeEventListener("focusout",x))});const b=e=>{t(M,e)},A=e=>t(H,e),P=s=>{const a=h(n);if(!a)return;const u=s.target,c=s.relatedTarget,d=u&&a.contains(u);if(!e.trapped){c&&a.contains(c)||(o=c)}d&&t("focusin",s),m.paused||e.trapped&&(d?r=u:Y(r,!0))},x=o=>{const a=h(n);if(!m.paused&&a)if(e.trapped){const n=o.relatedTarget;w(n)||a.contains(n)||setTimeout(()=>{if(!m.paused&&e.trapped){const e=oe({focusReason:s.value});t("focusout-prevented",e),e.defaultPrevented||Y(r,!0)}},0)}else{const e=o.target;e&&a.contains(e)||t("focusout",o)}};function O(){return t=this,r=null,s=function*(){yield L();const t=h(n);if(t){ee.push(m);const n=t.contains(document.activeElement)?o:document.activeElement;if(o=n,!t.contains(n)){const o=new Event(q,B);t.addEventListener(q,b),t.dispatchEvent(o),o.defaultPrevented||L(()=>{let o=e.focusStartEl;T(o)||(Y(o),document.activeElement!==o&&(o="first")),"first"===o&&((e,t=!1)=>{const n=document.activeElement;for(const o of e)if(Y(o,t),document.activeElement!==n)return})(G(t),!0),document.activeElement!==n&&"container"!==o||Y(t)})}}},new Promise((e,n)=>{var o=e=>{try{u(s.next(e))}catch(t){n(t)}},a=e=>{try{u(s.throw(e))}catch(t){n(t)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,a);u((s=s.apply(t,r)).next())});var t,r,s}function S(){const e=h(n);if(e){e.removeEventListener(q,b);const t=new CustomEvent(U,c(u({},B),{detail:{focusReason:s.value}}));e.addEventListener(U,A),e.dispatchEvent(t),t.defaultPrevented||"keyboard"!=s.value&&V.value>X.value&&!e.contains(document.activeElement)||Y(null!=o?o:document.body),e.removeEventListener(U,A),ee.remove(m),o=null,r=null}}return d(()=>{e.trapped&&O(),y(()=>e.trapped,e=>{e?O():S()})}),i(()=>{e.trapped&&S(),n.value&&(n.value.removeEventListener("keydown",E),n.value.removeEventListener("focusin",P),n.value.removeEventListener("focusout",x),n.value=void 0)}),{onKeydown:E}}}),[["render",function(e,t,n,o,r,s){return b(e.$slots,"default",{handleKeydown:e.onKeydown})}],["__file","focus-trap.vue"]]);const ue=A({to:{type:P([String,Object]),required:!0},disabled:Boolean});const ce=k(m(E({__name:"teleport",props:ue,setup:e=>(e,t)=>e.disabled?b(e.$slots,"default",{key:0}):(O(),x(S,{key:1,to:e.to},[b(e.$slots,"default")],8,["to"]))}),[["__file","teleport.vue"]]));export{ae as E,$ as F,ue as a,ce as b,F as c,C as d,_ as f,K as g,R as i,N as o,j as t};
