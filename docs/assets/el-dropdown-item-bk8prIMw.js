var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(o,n,t)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,i=(e,o)=>{for(var n in o||(o={}))r.call(o,n)&&a(e,n,o[n]);if(t)for(var n of t(o))l.call(o,n)&&a(e,n,o[n]);return e},s=(e,t)=>o(e,n(t));import{E as u}from"./el-button-0c2o2QLg.js";import{u as d,r as c,a as p,O as f,E as m}from"./index-cfyCizLf.js";import{E as g}from"./index-CDL13igh.js";import{_ as v,r as b,d as w,a1 as h,o as y,u as I,a as E,m as k,a2 as C,a9 as S,ab as T,U as _,br as F,w as R,bh as O,an as B,p as x,bs as K,n as M,E as P,b as $,y as D,z as A,k as j,bt as G,bu as N,aa as z,V as L,c as H,bv as U,X as J,g as Y,h as W,ac as V,a5 as X,W as q,bw as Q,b7 as Z,a7 as ee,f as oe,au as ne,aE as te,M as re,bx as le,e as ae,ao as ie,ap as se}from"./index-DHdgQId_.js";import{b as ue,u as de}from"./index-Bc4hPq7U.js";import{c as ce}from"./index-ci4gPeH2.js";import{c as pe}from"./refs-Cw5r5QN8.js";var fe=v(w({inheritAttrs:!1}),[["render",function(e,o,n,t,r,l){return b(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);var me=v(w({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,o,n,t,r,l){return b(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const ge="data-el-collection-item",ve=S({style:{type:T([String,Array,Object])},currentTabId:{type:T(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:T(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:be,ElCollectionItem:we,COLLECTION_INJECTION_KEY:he,COLLECTION_ITEM_INJECTION_KEY:ye}=(e=>{const o=`El${e}Collection`,n=`${o}Item`,t=Symbol(o),r=Symbol(n),l=Object.assign({},fe,{name:o,setup(){const e=k(),o=new Map;C(t,{itemMap:o,getItems:()=>{const n=I(e);if(!n)return[];const t=Array.from(n.querySelectorAll(`[${ge}]`));return[...o.values()].sort((e,o)=>t.indexOf(e.ref)-t.indexOf(o.ref))},collectionRef:e})}}),a=Object.assign({},me,{name:n,setup(e,{attrs:o}){const n=k(),l=h(t,void 0);C(r,{collectionItemRef:n}),y(()=>{const e=I(n);e&&l.itemMap.set(e,i({ref:e},o))}),E(()=>{const e=I(n);l.itemMap.delete(e)})}});return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:l,ElCollectionItem:a}})("RovingFocusGroup"),Ie=Symbol("elRovingFocusGroup"),Ee=Symbol("elRovingFocusGroupItem"),ke={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Ce=e=>{const{activeElement:o}=document;for(const n of e){if(n===o)return;if(n.focus(),o!==document.activeElement)return}},Se="currentTabIdChange",Te="rovingFocusGroup.entryFocus",_e={bubbles:!1,cancelable:!0},Fe=w({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ve,emits:[Se,"entryFocus"],setup(e,{emit:o}){var n;const t=k(null!=(n=e.currentTabId||e.defaultCurrentTabId)?n:null),r=k(!1),l=k(!1),a=k(),{getItems:i}=h(he,void 0),s=x(()=>[{outline:"none"},e.style]),u=F(o=>{var n;null==(n=e.onMousedown)||n.call(e,o)},()=>{l.value=!0}),d=F(o=>{var n;null==(n=e.onFocus)||n.call(e,o)},e=>{const o=!I(l),{target:n,currentTarget:a}=e;if(n===a&&o&&!I(r)){const e=new Event(Te,_e);if(null==a||a.dispatchEvent(e),!e.defaultPrevented){const e=i().filter(e=>e.focusable),o=[e.find(e=>e.active),e.find(e=>e.id===I(t)),...e].filter(Boolean).map(e=>e.ref);Ce(o)}}l.value=!1}),c=F(o=>{var n;null==(n=e.onBlur)||n.call(e,o)},()=>{r.value=!1});C(Ie,{currentTabbedId:K(t),loop:B(e,"loop"),tabIndex:x(()=>I(r)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:s,orientation:B(e,"orientation"),dir:B(e,"dir"),onItemFocus:e=>{o(Se,e)},onItemShiftTab:()=>{r.value=!0},onBlur:c,onFocus:d,onMousedown:u,onKeydown:o=>{const n=(e=>{const o=_(e);return ke[o]})(o);if(n){o.preventDefault();let l=i().filter(e=>e.focusable).map(e=>e.ref);switch(n){case"last":l.reverse();break;case"prev":case"next":{"prev"===n&&l.reverse();const a=l.indexOf(o.currentTarget);l=e.loop?(r=a+1,(t=l).map((e,o)=>t[(o+r)%t.length])):l.slice(a+1);break}}M(()=>{Ce(l)})}var t,r}}),R(()=>e.currentTabId,e=>{t.value=null!=e?e:null}),O(a,Te,(...e)=>{o("entryFocus",...e)})}});var Re=v(w({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:be,ElRovingFocusGroupImpl:v(Fe,[["render",function(e,o,n,t,r,l){return b(e.$slots,"default")}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]])}}),[["render",function(e,o,n,t,r,l){const a=P("el-roving-focus-group-impl"),i=P("el-focus-group-collection");return $(),D(i,null,{default:A(()=>[j(a,G(N(e.$attrs)),{default:A(()=>[b(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Oe=S({trigger:s(i({},p.trigger),{type:T([String,Array])}),triggerKeys:{type:T(Array),default:()=>[L.enter,L.numpadEnter,L.space,L.down]},virtualTriggering:p.virtualTriggering,virtualRef:p.virtualRef,effect:s(i({},d.effect),{default:"light"}),type:{type:T(String)},placement:{type:T(String),default:"bottom"},popperOptions:{type:T(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:T([Number,String]),default:0},maxHeight:{type:T([Number,String]),default:""},popperClass:d.popperClass,popperStyle:d.popperStyle,disabled:Boolean,role:{type:String,values:c,default:"menu"},buttonProps:{type:T(Object)},teleported:d.teleported,appendTo:d.appendTo,persistent:{type:Boolean,default:!0}}),Be=S({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:z}}),xe=S({onKeydown:{type:T(Function)}}),Ke=Symbol("elDropdown"),Me="elDropdown",{ButtonGroup:Pe}=u;var $e=v(w({name:"ElDropdown",components:{ElButton:u,ElButtonGroup:Pe,ElScrollbar:g,ElTooltip:m,ElRovingFocusGroup:Re,ElOnlyChild:f,ElIcon:X,ArrowDown:V},props:Oe,emits:["visible-change","click","command"],setup(e,{emit:o}){const n=ee(),t=q("dropdown"),{t:r}=Q(),l=k(),a=k(),i=k(),s=k(),u=k(null),d=k(null),c=k(!1),p=x(()=>({maxHeight:Z(e.maxHeight)})),f=x(()=>[t.m(w.value)]),m=x(()=>ce(e.trigger)),g=ue().value,v=x(()=>e.id||g);function b(){var e;null==(e=i.value)||e.onClose()}const w=de();C(Ke,{contentRef:s,role:x(()=>e.role),triggerId:v,isUsingKeyboard:c,onItemEnter:function(){},onItemLeave:function(){const e=I(s);m.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),d.value=null},handleClose:b}),C(Me,{instance:n,dropdownSize:w,handleClick:function(){var e;null==(e=i.value)||e.onClose(void 0,0)},commandHandler:function(...e){o("command",...e)},trigger:B(e,"trigger"),hideOnClick:B(e,"hideOnClick")});return{t:r,ns:t,scrollbar:u,wrapStyle:p,dropdownTriggerKls:f,dropdownSize:w,triggerId:v,currentTabId:d,handleCurrentTabIdChange:function(e){d.value=e},handlerMainButtonClick:e=>{o("click",e)},handleClose:b,handleOpen:function(){var e;null==(e=i.value)||e.onOpen()},handleBeforeShowTooltip:function(){o("visible-change",!0)},handleShowTooltip:function(e){var o;c.value="keydown"===(null==e?void 0:e.type),null==(o=s.value)||o.focus()},handleBeforeHideTooltip:function(){o("visible-change",!1)},popperRef:i,contentRef:s,triggeringElementRef:l,referenceElementRef:a}}}),[["render",function(e,o,n,t,r,l){var a;const i=P("el-roving-focus-group"),s=P("el-scrollbar"),u=P("el-only-child"),d=P("el-tooltip"),c=P("el-button"),p=P("arrow-down"),f=P("el-icon"),m=P("el-button-group");return $(),H("div",{class:Y([e.ns.b(),e.ns.is("disabled",e.disabled)])},[j(d,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(a=e.virtualRef)?a:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,"append-to":e.appendTo,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},U({content:A(()=>[j(s,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:A(()=>[j(i,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:A(()=>[b(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:A(()=>[j(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:A(()=>[b(e.$slots,"default")]),_:3},8,["id","tabindex"])]),key:"0"}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","append-to","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?($(),D(m,{key:0},{default:A(()=>[j(c,J({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:A(()=>[b(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),j(c,J({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:A(()=>[j(f,{class:Y(e.ns.e("icon"))},{default:A(()=>[j(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):W("v-if",!0)],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);var De=v(w({components:{ElRovingFocusCollectionItem:we},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:n,onItemFocus:t,onItemShiftTab:r,onKeydown:l}=h(Ie,void 0),a=ue(),i=k(),s=F(e=>{o("mousedown",e)},o=>{e.focusable?t(I(a)):o.preventDefault()}),u=F(e=>{o("focus",e)},()=>{t(I(a))}),d=F(e=>{o("keydown",e)},e=>{const{shiftKey:o,target:n,currentTarget:t}=e;_(e)===L.tab&&o?r():n===t&&l(e)}),c=x(()=>n.value===I(a));return C(Ee,{rovingFocusGroupItemRef:i,tabIndex:x(()=>I(c)?0:-1),handleMousedown:s,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:s}}}),[["render",function(e,o,n,t,r,l){const a=P("el-roving-focus-collection-item");return $(),D(a,{id:e.id,focusable:e.focusable,active:e.active},{default:A(()=>[b(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Ae=w({name:"DropdownItemImpl",components:{ElIcon:X},props:Be,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const n=q("dropdown"),{role:t}=h(Ke,void 0),{collectionItemRef:r}=h(ye,void 0),{rovingFocusGroupItemRef:l,tabIndex:a,handleFocus:i,handleKeydown:s,handleMousedown:u}=h(Ee,void 0),d=pe(r,l),c=x(()=>"menu"===t.value?"menuitem":"navigation"===t.value?"link":"button"),p=F(e=>{const n=_(e);if([L.enter,L.numpadEnter,L.space].includes(n))return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0},s);return{ns:n,itemRef:d,dataset:{[ge]:""},role:c,tabIndex:a,handleFocus:i,handleKeydown:p,handleMousedown:u}}}),je=["aria-disabled","tabindex","role"];const Ge=()=>{const e=h(Me,{}),o=x(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}};var Ne=v(w({name:"ElDropdownItem",components:{ElRovingFocusItem:De,ElDropdownItemImpl:v(Ae,[["render",function(e,o,n,t,r,l){const a=P("el-icon");return $(),H(re,null,[e.divided?($(),H("li",{key:0,role:"separator",class:Y(e.ns.bem("menu","item","divided"))},null,2)):W("v-if",!0),oe("li",J({ref:e.itemRef},i(i({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=o=>e.$emit("clickimpl",o)),onFocus:o[1]||(o[1]=(...o)=>e.handleFocus&&e.handleFocus(...o)),onKeydown:o[2]||(o[2]=te((...o)=>e.handleKeydown&&e.handleKeydown(...o),["self"])),onMousedown:o[3]||(o[3]=(...o)=>e.handleMousedown&&e.handleMousedown(...o)),onPointermove:o[4]||(o[4]=o=>e.$emit("pointermove",o)),onPointerleave:o[5]||(o[5]=o=>e.$emit("pointerleave",o))}),[e.icon||e.$slots.icon?($(),D(a,{key:0},{default:A(()=>[b(e.$slots,"icon",{},()=>[($(),D(ne(e.icon)))])]),_:3})):W("v-if",!0),b(e.$slots,"default")],16,je)],64)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]])},inheritAttrs:!1,props:Be,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:n}){const{elDropdown:t}=Ge(),r=ee(),{onItemEnter:l,onItemLeave:a}=h(Ke,void 0),s=F(e=>(o("pointermove",e),e.defaultPrevented),le(o=>{if(e.disabled)return void a(o);const n=o.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(l(o),o.defaultPrevented||null==n||n.focus({preventScroll:!0}))})),u=F(e=>(o("pointerleave",e),e.defaultPrevented),le(a));return{handleClick:F(n=>{if(!e.disabled)return o("click",n),"keydown"!==n.type&&n.defaultPrevented},o=>{var n,l,a;e.disabled?o.stopImmediatePropagation():((null==(n=null==t?void 0:t.hideOnClick)?void 0:n.value)&&(null==(l=t.handleClick)||l.call(t)),null==(a=t.commandHandler)||a.call(t,e.command,r,o))}),handlePointerMove:s,handlePointerLeave:u,propsAndAttrs:x(()=>i(i({},e),n))}}}),[["render",function(e,o,n,t,r,l){const a=P("el-dropdown-item-impl"),i=P("el-roving-focus-item");return $(),D(i,{focusable:!e.disabled},{default:A(()=>[j(a,J(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),U({default:A(()=>[b(e.$slots,"default")]),_:2},[e.$slots.icon?{name:"icon",fn:A(()=>[b(e.$slots,"icon")]),key:"0"}:void 0]),1040,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const ze=w({name:"ElDropdownMenu",props:xe,setup(e){const o=q("dropdown"),{_elDropdownSize:n}=Ge(),t=n.value,{contentRef:r,role:l,triggerId:a,isUsingKeyboard:i,handleClose:s}=h(Ke,void 0),{rovingFocusGroupRef:u,rovingFocusGroupRootStyle:d,onBlur:c,onFocus:p,onKeydown:f,onMousedown:m}=h(Ie,void 0),{collectionRef:g}=h(he,void 0),v=x(()=>[o.b("menu"),o.bm("menu",null==t?void 0:t.value)]),b=pe(r,u,g),w=F(o=>{var n;null==(n=e.onKeydown)||n.call(e,o)},e=>{const{currentTarget:o,target:n}=e,t=_(e);if(o.contains(n),L.tab===t)return s();f(e)});return{size:t,rovingFocusGroupRootStyle:d,dropdownKls:v,role:l,triggerId:a,dropdownListWrapperRef:b,handleKeydown:w,onBlur:c,handleFocus:function(e){i.value&&p(e)},onMousedown:m}}}),Le=["role","aria-labelledby"];var He=v(ze,[["render",function(e,o,n,t,r,l){return $(),H("ul",{ref:e.dropdownListWrapperRef,class:Y(e.dropdownKls),style:ae(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:o[0]||(o[0]=(...o)=>e.handleFocus&&e.handleFocus(...o)),onFocusout:o[1]||(o[1]=(...o)=>e.onBlur&&e.onBlur(...o)),onKeydown:o[2]||(o[2]=te((...o)=>e.handleKeydown&&e.handleKeydown(...o),["self"])),onMousedown:o[3]||(o[3]=te((...o)=>e.onMousedown&&e.onMousedown(...o),["self"]))},[b(e.$slots,"default")],46,Le)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Ue=ie($e,{DropdownItem:Ne,DropdownMenu:He}),Je=se(Ne),Ye=se(He);export{Ue as E,Ye as a,Je as b,Oe as d};
