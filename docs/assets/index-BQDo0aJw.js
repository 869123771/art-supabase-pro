var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&i(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&i(e,a,t[a]);return e},s=(e,o)=>t(e,a(o)),u=(e,t,a)=>new Promise((o,n)=>{var l=e=>{try{r(a.next(e))}catch(t){n(t)}},i=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,i);r((a=a.apply(e,t)).next())});import{bc as d,bd as p,be as c,a4 as f,a9 as v,aa as m,bf as b,bb as y,ab as h,ak as g,p as x,a7 as w,bg as S,w as C,bh as k,b2 as z,u as E,aC as P,m as j,n as I,_ as M,d as F,bi as O,b4 as N,W as $,af as B,o as _,an as R,b as V,c as L,h as T,M as A,g as H,r as W,f as K,y as U,z as D,au as X,a5 as Y,X as Z,aE as q,bj as G,j as J,e as Q,bk as ee,bl as te,bm as ae,al as oe,bn as ne,ah as le,ao as ie}from"./index-DocD4lg6.js";import{u as re}from"./index-DmiZVFYU.js";import{U as se,I as ue,C as de}from"./event-BwRzfsZt.js";import{u as pe,a as ce}from"./use-form-item-CYVSqIfx.js";import{u as fe,d as ve}from"./index-B8YGeOD4.js";import{i as me}from"./focus-trap-CMJEhiq8.js";import{d as be}from"./error-D_Dr4eZ1.js";function ye(){if(!arguments.length)return[];var e=arguments[0];return d(e)?e:[e]}let he;const ge={height:"0",visibility:"hidden",overflow:c()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},xe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],we=e=>{const t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function Se(e,t=1,a){var o,n;he||(he=document.createElement("textarea"),(null!=(o=e.parentNode)?o:document.body).appendChild(he));const{paddingSize:l,borderSize:i,boxSizing:r,contextStyle:s}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:xe.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(e);s.forEach(([e,t])=>null==he?void 0:he.style.setProperty(e,t)),Object.entries(ge).forEach(([e,t])=>null==he?void 0:he.style.setProperty(e,t,"important")),he.value=e.value||e.placeholder||"";let u=he.scrollHeight;const d={};"border-box"===r?u+=i:"content-box"===r&&(u-=l),he.value="";const c=he.scrollHeight-l;if(p(t)){let e=c*t;"border-box"===r&&(e=e+l+i),u=Math.max(e,u),d.minHeight=`${e}px`}if(p(a)){let e=c*a;"border-box"===r&&(e=e+l+i),u=Math.min(e,u)}return d.height=`${u}px`,null==(n=he.parentNode)||n.removeChild(he),he=void 0,d}const Ce=v(s(r({id:{type:String,default:void 0},size:y,disabled:{type:Boolean,default:void 0},modelValue:{type:h([String,Number,Object]),default:""},modelModifiers:{type:h(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:h(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:h([Boolean,Object]),default:!1},autocomplete:{type:h(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:m,default:b},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:m},prefixIcon:{type:m},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:h([Object,Array,String]),default:()=>g({})},autofocus:Boolean,rows:{type:Number,default:2}},re(["ariaLabel"])),{inputmode:{type:h(String),default:void 0},name:String})),ke={[se]:e=>f(e),input:e=>f(e),change:(e,t)=>f(e)&&(t instanceof Event||void 0===t),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ze=["class","style"],Ee=/^on[A-Z]/,Pe=(e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,o=x(()=>((null==a?void 0:a.value)||[]).concat(ze)),n=w();return x(n?()=>{var e;return S(Object.entries(null==(e=n.proxy)?void 0:e.$attrs).filter(([e])=>!(o.value.includes(e)||t&&Ee.test(e))))}:()=>({}))};function je(e,{disabled:t,beforeFocus:a,afterFocus:o,beforeBlur:n,afterBlur:l}={}){const i=w(),{emit:r}=i,s=P(),u=j(!1),d=e=>{const n=!!z(a)&&a(e);E(t)||u.value||n||(u.value=!0,r("focus",e),null==o||o())},p=e=>{var a;const o=!!z(n)&&n(e);E(t)||e.relatedTarget&&(null==(a=s.value)?void 0:a.contains(e.relatedTarget))||o||(u.value=!1,r("blur",e),null==l||l())};return C([s,()=>E(t)],([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}),k(s,"focus",d,!0),k(s,"blur",p,!0),k(s,"click",a=>{var o,n;E(t)||me(a.target)||(null==(o=s.value)?void 0:o.contains(document.activeElement))&&s.value!==document.activeElement||null==(n=e.value)||n.focus()},!0),{isFocused:u,wrapperRef:s,handleFocus:d,handleBlur:p}}function Ie({afterComposition:e,emit:t}){const a=j(!1),o=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},n=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,I(()=>e(o)))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?n(e):o(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:o,handleCompositionEnd:n}}const Me=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Fe=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"];const Oe=ie(M(F(s(r({},{name:"ElInput",inheritAttrs:!1}),{__name:"input",props:Ce,emits:ke,setup(e,{expose:t,emit:a}){const o=e,n=a,l=O(),i=Pe(),s=N(),d=x(()=>["textarea"===o.type?h.b():y.b(),y.m(m.value),y.is("disabled",b.value),y.is("exceed",_e.value),{[y.b("group")]:s.prepend||s.append,[y.m("prefix")]:s.prefix||o.prefixIcon,[y.m("suffix")]:s.suffix||o.suffixIcon||o.clearable||o.showPassword,[y.bm("suffix","password-clear")]:Oe.value&&Ne.value,[y.b("hidden")]:"hidden"===o.type},l.class]),p=x(()=>[y.e("wrapper"),y.is("focus",re.value)]),{form:c,formItem:f}=pe(),{inputId:v}=ce(o,{formItemContext:f}),m=fe(),b=ve(),y=$("input"),h=$("textarea"),g=P(),w=P(),S=j(!1),k=j(!1),z=j(),M=P(o.inputStyle),F=x(()=>g.value||w.value),{wrapperRef:ie,isFocused:re,handleFocus:me,handleBlur:ye}=je(F,{disabled:b,afterBlur(){var e;o.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"blur").catch(e=>be()))}}),he=x(()=>{var e;return null!=(e=null==c?void 0:c.statusIcon)&&e}),ge=x(()=>(null==f?void 0:f.validateState)||""),xe=x(()=>ge.value&&ee[ge.value]),Ce=x(()=>k.value?te:ae),ke=x(()=>[l.style]),ze=x(()=>[o.inputStyle,M.value,{resize:o.resize}]),Ee=x(()=>oe(o.modelValue)?"":String(o.modelValue)),Oe=x(()=>o.clearable&&!b.value&&!o.readonly&&!!Ee.value&&(re.value||S.value)),Ne=x(()=>o.showPassword&&!b.value&&!!Ee.value),$e=x(()=>o.showWordLimit&&!!o.maxlength&&("text"===o.type||"textarea"===o.type)&&!b.value&&!o.readonly&&!o.showPassword),Be=x(()=>Ee.value.length),_e=x(()=>!!$e.value&&Be.value>Number(o.maxlength)),Re=x(()=>!!s.suffix||!!o.suffixIcon||Oe.value||o.showPassword||$e.value||!!ge.value&&he.value),Ve=x(()=>!!Object.keys(o.modelModifiers).length),[Le,Te]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),i=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:i}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let i=a.length;if(a.endsWith(n))i=a.length-n.length;else if(a.startsWith(o))i=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(i=t+1)}e.value.setSelectionRange(i,i)}]}(g);B(w,e=>{if(He(),!$e.value||"both"!==o.resize&&"horizontal"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;z.value={right:`calc(100% - ${a+22-10}px)`}});const Ae=()=>{const{type:e,autosize:t}=o;if(ne&&"textarea"===e&&w.value)if(t){const e=le(t)?t.minRows:void 0,a=le(t)?t.maxRows:void 0,o=Se(w.value,e,a);M.value=r({overflowY:"hidden"},o),I(()=>{w.value.offsetHeight,M.value=o})}else M.value={minHeight:Se(w.value).minHeight}},He=(e=>{let t=!1;return()=>{var a;if(t||!o.autosize)return;null===(null==(a=w.value)?void 0:a.offsetParent)||(setTimeout(e),t=!0)}})(Ae),We=()=>{const e=F.value,t=o.formatter?o.formatter(Ee.value):Ee.value;e&&e.value!==t&&"file"!==o.type&&(e.value=t)},Ke=e=>{const{trim:t,number:a}=o.modelModifiers;return t&&(e=e.trim()),a&&(e=`${we(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},Ue=e=>u(null,null,function*(){if(Xe.value)return;const{lazy:t}=o.modelModifiers;let{value:a}=e.target;t?n(ue,a):(a=Ke(a),String(a)!==Ee.value?(Le(),n(se,a),n(ue,a),yield I(),(o.formatter&&o.parser||!Ve.value)&&We(),Te()):o.formatter&&We())}),De=e=>u(null,null,function*(){let{value:t}=e.target;t=Ke(t),o.modelModifiers.lazy&&n(se,t),n(de,t,e),yield I(),We()}),{isComposing:Xe,handleCompositionStart:Ye,handleCompositionUpdate:Ze,handleCompositionEnd:qe}=Ie({emit:n,afterComposition:Ue}),Ge=()=>{k.value=!k.value},Je=e=>{S.value=!1,n("mouseleave",e)},Qe=e=>{S.value=!0,n("mouseenter",e)},et=e=>{n("keydown",e)},tt=()=>{n(se,""),n(de,""),n("clear"),n(ue,"")};return C(()=>o.modelValue,()=>{var e;I(()=>Ae()),o.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"change").catch(e=>be()))}),C(Ee,e=>{if(!F.value)return;const{trim:t,number:a}=o.modelModifiers,n=F.value.value,l=!a&&"number"!==o.type||/^0\d/.test(n)?n:`${we(n)}`;l!==e&&(document.activeElement===F.value&&"range"!==F.value.type&&t&&l.trim()===e||We())}),C(()=>o.type,()=>u(null,null,function*(){yield I(),We(),Ae()})),_(()=>{!o.formatter&&o.parser,We(),I(Ae)}),t({input:g,textarea:w,ref:F,textareaStyle:ze,autosize:R(o,"autosize"),isComposing:Xe,focus:()=>{var e;return null==(e=F.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=F.value)?void 0:e.blur()},select:()=>{var e;null==(e=F.value)||e.select()},clear:tt,resizeTextarea:Ae}),(e,t)=>(V(),L("div",{class:H([d.value,{[E(y).bm("group","append")]:e.$slots.append,[E(y).bm("group","prepend")]:e.$slots.prepend}]),style:Q(ke.value),onMouseenter:Qe,onMouseleave:Je},[T(" input "),"textarea"!==e.type?(V(),L(A,{key:0},[T(" prepend slot "),e.$slots.prepend?(V(),L("div",{key:0,class:H(E(y).be("group","prepend"))},[W(e.$slots,"prepend")],2)):T("v-if",!0),K("div",{ref_key:"wrapperRef",ref:ie,class:H(p.value)},[T(" prefix slot "),e.$slots.prefix||e.prefixIcon?(V(),L("span",{key:0,class:H(E(y).e("prefix"))},[K("span",{class:H(E(y).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(V(),U(E(Y),{key:0,class:H(E(y).e("icon"))},{default:D(()=>[(V(),U(X(e.prefixIcon)))]),_:1},8,["class"])):T("v-if",!0)],2)],2)):T("v-if",!0),K("input",Z({id:E(v),ref_key:"input",ref:g,class:E(y).e("inner")},E(i),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?k.value?"text":"password":e.type,disabled:E(b),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t[0]||(t[0]=(...e)=>E(Ye)&&E(Ye)(...e)),onCompositionupdate:t[1]||(t[1]=(...e)=>E(Ze)&&E(Ze)(...e)),onCompositionend:t[2]||(t[2]=(...e)=>E(qe)&&E(qe)(...e)),onInput:Ue,onChange:De,onKeydown:et}),null,16,Me),T(" suffix slot "),Re.value?(V(),L("span",{key:1,class:H(E(y).e("suffix"))},[K("span",{class:H(E(y).e("suffix-inner"))},[Oe.value&&Ne.value&&$e.value?T("v-if",!0):(V(),L(A,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(V(),U(E(Y),{key:0,class:H(E(y).e("icon"))},{default:D(()=>[(V(),U(X(e.suffixIcon)))]),_:1},8,["class"])):T("v-if",!0)],64)),Oe.value?(V(),U(E(Y),{key:1,class:H([E(y).e("icon"),E(y).e("clear")]),onMousedown:q(E(G),["prevent"]),onClick:tt},{default:D(()=>[(V(),U(X(e.clearIcon)))]),_:1},8,["class","onMousedown"])):T("v-if",!0),Ne.value?(V(),U(E(Y),{key:2,class:H([E(y).e("icon"),E(y).e("password")]),onClick:Ge,onMousedown:q(E(G),["prevent"]),onMouseup:q(E(G),["prevent"])},{default:D(()=>[(V(),U(X(Ce.value)))]),_:1},8,["class","onMousedown","onMouseup"])):T("v-if",!0),$e.value?(V(),L("span",{key:3,class:H([E(y).e("count"),E(y).is("outside","outside"===e.wordLimitPosition)])},[K("span",{class:H(E(y).e("count-inner"))},J(Be.value)+" / "+J(e.maxlength),3)],2)):T("v-if",!0),ge.value&&xe.value&&he.value?(V(),U(E(Y),{key:4,class:H([E(y).e("icon"),E(y).e("validateIcon"),E(y).is("loading","validating"===ge.value)])},{default:D(()=>[(V(),U(X(xe.value)))]),_:1},8,["class"])):T("v-if",!0)],2)],2)):T("v-if",!0)],2),T(" append slot "),e.$slots.append?(V(),L("div",{key:1,class:H(E(y).be("group","append"))},[W(e.$slots,"append")],2)):T("v-if",!0)],64)):(V(),L(A,{key:1},[T(" textarea "),K("textarea",Z({id:E(v),ref_key:"textarea",ref:w,class:[E(h).e("inner"),E(y).is("focus",E(re))]},E(i),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:E(b),readonly:e.readonly,autocomplete:e.autocomplete,style:ze.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t[3]||(t[3]=(...e)=>E(Ye)&&E(Ye)(...e)),onCompositionupdate:t[4]||(t[4]=(...e)=>E(Ze)&&E(Ze)(...e)),onCompositionend:t[5]||(t[5]=(...e)=>E(qe)&&E(qe)(...e)),onInput:Ue,onFocus:t[6]||(t[6]=(...e)=>E(me)&&E(me)(...e)),onBlur:t[7]||(t[7]=(...e)=>E(ye)&&E(ye)(...e)),onChange:De,onKeydown:et}),null,16,Fe),$e.value?(V(),L("span",{key:0,style:Q(z.value),class:H([E(y).e("count"),E(y).is("outside","outside"===e.wordLimitPosition)])},J(Be.value)+" / "+J(e.maxlength),7)):T("v-if",!0)],64))],38))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{Oe as E,Ie as a,Pe as b,ye as c,je as u};
